---
title: AD FS 문제 해결-인증서
description: 이 문서에서는 일반적인 인증서 문제에 대해 설명 합니다.
author: billmath
ms.author: billmath
manager: mtillman
ms.date: 02/21/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: cee87ce864e333b98e92fa64e939f2ead7edc156
ms.sourcegitcommit: f6490192d686f0a1e0c2ebe471f98e30105c0844
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/10/2019
ms.locfileid: "70869191"
---
# <a name="ad-fs-troubleshooting---certificates"></a>AD FS 문제 해결-인증서
AD FS 올바르게 작동 하려면 다음 인증서가 필요 합니다.  이러한 설정 또는 구성이 제대로 구성 되지 않은 경우 문제가 발생할 수 있습니다.  

## <a name="required-certificates"></a>필수 인증서
AD FS 하려면 다음 인증서가 필요 합니다.



- **페더레이션 트러스트** – 상호 신뢰할 수 있는 인터넷 루트 CA (인증 기관)에 연결 된 인증서가 클레임 공급자와 신뢰 당사자 페더레이션 서버 모두의 신뢰할 수 있는 루트 저장소에 있어야 합니다. 상호 인증 디자인은 각 측에서 해당 파트너와 루트 CA를 교환 하거나, 해당 하는 경우 각 측에서 가져온 자체 서명 된 인증서를 사용 하 여 구현 되었습니다.
- **토큰 서명** – 각 페더레이션 서비스 컴퓨터에는 토큰 서명 인증서가 필요 합니다.  신뢰 당사자 페더레이션 서버가 클레임 공급자 토큰 서명 인증서를 신뢰 해야 합니다. RP 페더레이션 서버에서 토큰을 수신 하는 모든 응용 프로그램은 신뢰 당사자 토큰 서명 인증서를 신뢰 해야 합니다.
- **SSL(Secure Sockets Layer) (ssl)** -페더레이션 서비스에 대 한 ssl 인증서는 페더레이션 서버 프록시 컴퓨터의 신뢰할 수 있는 저장소에 있어야 하며 신뢰할 수 있는 CA (인증 기관) 저장소에 대 한 유효한 체인이 있어야 합니다.
- Crl ( **인증서 해지 목록** ) – crl이 게시 된 모든 인증서의 경우 인증서에 액세스 해야 하는 모든 클라이언트 및 서버에서 crl에 액세스할 수 있어야 합니다.

위의 내용이 제대로 구성 되어 있지 않으면 AD FS 작동 하지 않습니다.

## <a name="common-things-to-check-with-certificates"></a>인증서를 사용 하 여 확인할 수 있는 일반적인 사항
다음은 발생할 수 있으며 인증서 문제를 해결 하려고 할 때 확인 해야 하는 항목 목록입니다.

- 인증서를 신뢰할 수 있는지 확인 합니다.
    - 클라이언트에서 SSL 인증서를 신뢰할 수 있어야 합니다.
    - 신뢰 당사자가 토큰 서명 인증서를 신뢰 해야 합니다.
- 신뢰 체인 확인-체인의 모든 인증서가 유효 해야 합니다.
- 인증서 만료 날짜 확인
- CRL (인증서 해지 목록) 액세스 가능성 확인
    - CDP 필드가 채워져 있는지 확인 합니다.
    - CDP를 수동으로 찾아보기
- 인증서가 해지 되지 않았는지 확인 합니다.

## <a name="common-certificate-errors"></a>일반적인 인증서 오류
다음 표는 일반적인 오류 및 가능한 원인 목록입니다.

|이벤트|원인|해결 방법
|-----|-----|-----|
|이벤트 249-인증서 저장소에서 인증서를 찾을 수 없습니다. 인증서 롤오버 시나리오에서는 페더레이션 서비스이 인증서를 사용 하 여 서명 하거나 암호를 해독할 때 오류가 발생할 수 있습니다.|의심 되는 인증서가 로컬 인증서 저장소에 없거나 서비스 계정에 인증서의 개인 키에 대 한 권한이 없습니다.|인증서가 AD FS 서버의 LocalMAchine\My 저장소에 설치 되어 있는지 확인 합니다. AD FS 서비스 계정에 인증서의 개인 키에 대 한 읽기 권한이 있는지 확인 하십시오.|
|이벤트 315-클레임 공급자 트러스트 서명 인증서에 대 한 인증서 체인을 빌드하는 동안 오류가 발생 했습니다.|인증서가 해지 되었습니다.</br></br>인증서 체인을 확인할 수 없습니다.</br></br>인증서가 만료 되었거나 아직 유효 하지 않습니다.|인증서가 유효 하 고 해지 되지 않았는지 확인 하십시오.</br></br>CRL에 액세스할 수 있는지 확인 합니다.|
|이벤트 316-신뢰 당사자 트러스트 서명 인증서에 대 한 인증서 체인을 빌드하는 동안 오류가 발생 했습니다.|인증서가 해지 되었습니다.</br></br>인증서 체인을 확인할 수 없습니다.</br></br>인증서가 만료 되었거나 아직 유효 하지 않습니다.|인증서가 유효 하 고 해지 되지 않았는지 확인 하십시오.</br></br>CRL에 액세스할 수 있는지 확인 합니다.|
|이벤트 317-신뢰 당사자 트러스트 암호화 인증서에 대 한 인증서 체인을 빌드하는 동안 오류가 발생 했습니다.|인증서가 해지 되었습니다.</br></br>인증서 체인을 확인할 수 없습니다.</br></br>인증서가 만료 되었거나 아직 유효 하지 않습니다.|인증서가 유효 하 고 해지 되지 않았는지 확인 하십시오.</br></br>CRL에 액세스할 수 있는지 확인 합니다.|
|이벤트 319-클라이언트 인증서에 대 한 인증서 체인을 빌드하는 동안 오류가 발생 했습니다.|인증서가 해지 되었습니다.</br></br>인증서 체인을 확인할 수 없습니다.</br></br>인증서가 만료 되었거나 아직 유효 하지 않습니다.|인증서가 유효 하 고 해지 되지 않았는지 확인 하십시오.</br></br>CRL에 액세스할 수 있는지 확인 합니다.|
|이벤트 360-인증서 전송 끝점에 대 한 요청이 있지만 요청에 클라이언트 인증서가 포함 되어 있지 않습니다.|클라이언트 인증서를 발급 한 루트 CA는 신뢰할 수 없습니다.</br></br>클라이언트 인증서가 만료 되었습니다.</br></br>클라이언트 인증서는 자체 서명 되며 신뢰할 수 없습니다.|클라이언트 인증서를 발급 한 루트 CA가 신뢰할 수 있는 루트 저장소에 있는지 확인 하십시오.</br></br>클라이언트 인증서가 만료 되지 않았는지 확인 합니다.</br></br>클라이언트 인증서가 자체 서명 된 경우 신뢰할 수 있는 인증서 목록에 추가 되었는지 확인 하거나 자체 서명 된 인증서를 신뢰할 수 있는 인증서로 대체 합니다.|
|이벤트 374-클레임 공급자 트러스트 암호화 인증서에 대 한 인증서 체인을 빌드하는 동안 오류가 발생 했습니다.|인증서가 해지 되었습니다.</br></br>인증서 체인을 확인할 수 없습니다.</br></br>인증서가 만료 되었거나 아직 유효 하지 않습니다.|인증서가 유효 하 고 해지 되지 않았는지 확인 하십시오.</br></br>CRL에 액세스할 수 있는지 확인 합니다.|
|이벤트 381-구성 인증서의 인증서 체인을 빌드하는 동안 오류가 발생 했습니다.|AD FS 서버에서 사용 하도록 구성 된 인증서 중 하나가 만료 되었거나 해지 되었습니다.|구성 된 모든 인증서가 해지 되지 않고 만료 되지 않았는지 확인 합니다.|
|이벤트 385-AD FS AD FS 구성 데이터베이스의 인증서를 하나 이상 수동으로 업데이트 해야 함을 검색 했습니다.|AD FS 서버에서 사용 하도록 구성 된 인증서 중 하나가 만료 되었거나 만료 날짜에 가까워졌습니다.|대체를 사용 하 여 만료 되었거나 곧 만료 될 인증서를 업데이트 합니다. 자체 서명 된 인증서를 사용 하 고 자동 인증서 롤오버가 사용 되는 경우이 오류는 자동으로 해결 되므로 무시 될 수 있습니다.|
|이벤트 387-AD FS 페더레이션 서비스에 지정 된 하나 이상의 인증서가 AD FS Windows 서비스에서 사용 하는 서비스 계정에 액세스할 수 없음을 감지 했습니다.|AD FS 서비스 계정에 구성 된 하나 이상의 인증서의 개인 키에 대 한 읽기 권한이 없습니다.|AD FS 서비스 계정에 구성 된 모든 인증서의 개인 키에 대 한 읽기 권한이 있는지 확인 하십시오.|
|이벤트 389-하나 이상의 트러스트에서 인증서가 만료 되었거나 곧 만료 되기 때문에 수동으로 업데이트 해야 하는 AD FS 검색 되었습니다.|구성 된 파트너 인증서 중 하나가 만료 되었거나 곧 만료 될 예정입니다. 이는 클레임 공급자 트러스트 또는 신뢰 당사자 트러스트에 적용 될 수 있습니다.|수동으로이 트러스트를 만든 경우 인증서 구성을 수동으로 업데이트 합니다. 페더레이션 메타 데이터를 사용 하 여 트러스트를 만든 경우 파트너가 인증서를 업데이트 하는 즉시 인증서가 자동으로 업데이트 됩니다.|




## <a name="next-steps"></a>다음 단계

- [AD FS 문제 해결](ad-fs-tshoot-overview.md)
 