---
title: defrag
description: 조각화 된 파일을 찾아 통합 하는 조각 모음 명령에 대 한 참조 문서를 참조 하세요.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: aaf1d1ac-996a-4282-9b4d-1e8245ff162c
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: c952ff78147d3b4c6097aaf9dd87e55ecc7911ad
ms.sourcegitcommit: 2afed2461574a3f53f84fc9ec28d86df3b335685
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/02/2020
ms.locfileid: "85928797"
---
# <a name="defrag"></a>defrag

> 적용 대상: Windows 10, Windows Server (반기 채널), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

찾아 시스템 성능 향상을 위해 로컬 볼륨의 조각화 된 파일을 통합 합니다.

로컬의 멤버 자격이 **관리자** 그룹 또는 그에 해당 하는이 명령을 실행 하는 데 필요한 최소입니다.

## <a name="syntax"></a>구문

```
defrag <volumes> | /c | /e <volumes>    [/h] [/m [n]| [/u] [v]]
defrag <volumes> | /c | /e <volumes> /a [/h] [/m [n]| [/u] [v]]
defrag <volumes> | /c | /e <volumes> /x [/h] [/m [n]| [/u] [v]]
defrag <volume> [<parameters>]
```

### <a name="parameters"></a>매개 변수

| 매개 변수 | Description |
| --------- | ----------- |
| `<volume>` | 분석 하거나 조각 모음을 볼륨의 드라이브 문자 또는 탑재 지점 경로 지정 합니다. |
| /a | 지정 된 볼륨에 분석을 수행 합니다. |
| /C | 모든 볼륨에 대 한 작업을 수행 합니다. |
| /d | 기존 조각 모음 (기본값)을 수행 합니다. 그러나 계층화 된 볼륨에서 기존 조각 모음은 용량 계층 에서만 수행 됩니다. |
| /e | 지정 된 항목을 제외한 모든 볼륨에 대 한 작업을 수행 합니다. |
| /g | 지정 된 볼륨의 저장소 계층을 최적화 합니다. |
| /h | 보통 우선 순위로 작업 실행 (기본값은 낮은). |
| /i [n] | 계층 최적화는 각 볼륨에서 최대 n 초 동안 실행 됩니다. |
| /k | 지정 된 볼륨에 대 한 조각 통합을 수행 합니다. |
| /l | 지정 된 볼륨에 대해 retrim를 수행 합니다. |
| /m [n] | 각 볼륨에 대 한 작업을 백그라운드에서 병렬로 실행 합니다. 최대 n 개의 스레드는 저장소 계층을 병렬로 최적화 합니다. |
| /o | 각 미디어 유형에 대해 적절 한 최적화를 수행 합니다. |
| /t | 지정된 된 볼륨에 이미 진행 중인 작업을 추적 합니다. |
| /U | 화면에서 작업의 진행률을 인쇄 합니다. |
| /v | 조각화 통계를 포함 하는 자세한 정보 출력을 인쇄 합니다. |
| /x | 지정 된 볼륨에 여유 공간이 통합을 수행 합니다. |
| /? | 이 도움말 정보를 표시합니다. |

#### <a name="remarks"></a>설명

- 다음을 비롯 한 특정 파일 시스템 볼륨 또는 드라이브 조각 모음을 실행할 수 없습니다.

  - 파일 시스템에 의해 잠긴 볼륨입니다.

  - 볼륨은 파일 시스템을 더티로 표시 하 여 손상 될 수 있음을 나타냅니다.<br>`chkdsk`이 볼륨 또는 드라이브를 조각 모음 하려면 먼저를 실행 해야 합니다. 명령을 사용 하 여 볼륨이 변경 되었는지 확인할 수 있습니다 `fsutil dirty` .

  - 네트워크 드라이브.

  - CD-ROM.

  - **NTFS**, **ReFS**, **Fat** 또는 **Fat32**가 아닌 파일 시스템 볼륨입니다.

- SSD (반도체 드라이브) 또는 SSD에 있는 VHD (가상 하드 디스크)에서 볼륨의 조각 모음을 예약할 수 없습니다.

- 이 절차를 수행하려면 로컬 컴퓨터의 Administrators 그룹 구성원이거나 적절한 권한을 위임 받아야 합니다. 컴퓨터가 도메인에 가입되어 있으면 Domain Admins 그룹의 구성원이 이 절차를 수행할 수도 있습니다. 보안을 위해 **실행** 대상을 사용 하 여이 절차를 수행 하는 것이 좋습니다.

- 볼륨에 여유 공간이 15% 이상이 있어야 합니다. **조각 모음** 완전히 또는 적절히 조각 모음을 수행 합니다. **defrag** 는이 공간을 파일 조각의 정렬 영역으로 사용 합니다. 볼륨에 사용 가능한 공간을 15% 보다 작은 경우 **조각 모음** 는 부분적 으로만 조각 모음을 실행 합니다. 볼륨에 여유 공간을 늘리려면 불필요 한 파일을 삭제 하거나 다른 디스크로 이동 합니다.

- 반면 **조각 모음** 는 깜박이 커서가 분석 하 고 볼륨 조각 모음을 표시 합니다. 때 **조각 모음** 완성 되어 분석 볼륨의 조각 모음, 분석 보고서, 조각 모음 보고서 또는 두 보고서를 표시 하 고 다음 명령 프롬프트를 종료 합니다.

- 기본적으로 **조각 모음** 지정 하지 않은 경우에 분석 및 조각 모음 보고서의 요약을 표시는 **/a** 또는 **/v** 매개 변수입니다.

- FileName.txt를 입력 하 여 보고서를 텍스트 파일로 보낼 수 있습니다 **>** <em> </em>. 여기서 *FileName.txt* 은 사용자가 지정 하는 파일 이름입니다. `defrag volume /v > FileName.txt`

- 명령줄에서 조각 모음 프로세스를 중단 하려면 **CTRL + C**합니다.

- **Defrag** 명령 및 디스크 조각 모음을 실행 하는 것은 함께 사용할 수 없습니다. 디스크 조각 모음을 사용 하 여 볼륨을 조각 모음 하 고 명령줄에서 **조각 모음** 명령을 실행 하면 **조각 모음** 명령이 실패 합니다. 반대로, **조각** 모음 명령을 실행 하 고 디스크 조각 모음을 여는 경우 디스크 조각 모음에서 조각 모음 옵션을 사용할 수 없습니다.

## <a name="examples"></a>예

진행률 및 자세한 정보 출력을 제공 하는 동안 C 드라이브의 볼륨을 조각 모음을 입력 합니다.

```
defrag c: /u /v
```

백그라운드에서 동시에 C와 D 드라이브의 볼륨을 조각 모음을 수행 하려면 다음을 입력 합니다.

```
defrag c: d: /m
```

C 드라이브에 탑재 된 볼륨의 조각화 분석을 수행 하 고 진행률을 제공 하려면 다음을 입력 합니다.

```
defrag c: mountpoint /a /u
```

보통 우선 순위로 모든 볼륨을 조각 모음을 자세한 정보 출력을 제공 하려면 다음을 입력 합니다.

```
defrag /c /h /v
```

## <a name="scheduled-task"></a>예약된 작업

조각 모음 프로세스는 일반적으로 매주 실행 되는 유지 관리 작업으로 예약 된 작업을 실행 합니다. 관리자는 **드라이브 최적화** 앱을 사용 하 여 작업이 실행 되는 빈도를 변경할 수 있습니다.

- 예약 된 작업에서 실행 되는 경우 **조각 모음** 에서는 아래와 같은 ssd의 정책 지침을 사용 합니다.

  - **기존 최적화 프로세스**. 에는 **기존 조각 모음이**포함 됩니다. 예를 들어 파일을 retrim 하 여 적절 하 게 연속 하 고 **retrim**합니다. 이 작업은 한 달에 한 번 수행 됩니다. 그러나 **기존의 조각 모음** 과 **retrim** 을 모두 건너뛴 경우 **분석** 은 실행 되지 않습니다.

  - 일반적으로 예약 된 실행 간에 SSD에서 **기존 조각 모음** 을 수동으로 실행 하는 경우 예약 된 다음 작업 실행 **analysis** 은 분석과 **RETRIM**을 수행 하지만 해당 SSD에서 **기존 조각 모음** 을 건너뜁니다.

  - **분석**을 건너뛰면 **드라이브 최적화** 앱에서 업데이트 된 **마지막 실행** 시간이 표시 되지 않습니다. 이로 인해 **마지막 실행** 시간은 이전 한 달까지 걸릴 수 있습니다.

  - 예약 된 작업에서 모든 볼륨을 조각 모음 하지 않은 것을 확인할 수 있습니다. 이는 일반적으로 다음과 같은 경우에 발생 합니다.

    - 프로세스에서 실행 되는 컴퓨터의 절전 모드를 해제 하지 않습니다.

    - 컴퓨터가 연결 되어 있지 않습니다. 컴퓨터가 배터리 전원으로 실행 되는 경우 프로세스가 실행 되지 않습니다.

    - 컴퓨터에서 백업을 시작 했습니다 (유휴 상태에서 다시 시작 됨).

## <a name="additional-references"></a>추가 참조

- [명령줄 구문 키](command-line-syntax-key.md)

- [chkdsk](chkdsk.md)

- [fsutil](fsutil.md)

- [fsutil dirty](fsutil-dirty.md)

- [최적화-볼륨 Powershell](https://docs.microsoft.com/powershell/module/storage/optimize-volume?view=win10-ps)
