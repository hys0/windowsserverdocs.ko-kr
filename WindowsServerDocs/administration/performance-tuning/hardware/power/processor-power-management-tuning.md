---
title: Windows Server 분산 전원 계획에 대 한 프로세서 전원 관리 (PPM) 튜닝
description: Windows Server 분산 전원 계획에 대 한 프로세서 전원 관리 (PPM) 튜닝
ms.prod: windows-server
ms.technology: performance-tuning-guide
ms.topic: conceptual
ms.author: qizha;tristanb
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 25244ecb653f7a1b8461130bba40901b35945765
ms.sourcegitcommit: 771db070a3a924c8265944e21bf9bd85350dd93c
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/27/2020
ms.locfileid: "85471618"
---
# <a name="processor-power-management-ppm-tuning-for-the-windows-server-balanced-power-plan"></a>Windows Server 분산 전원 계획에 대 한 프로세서 전원 관리 (PPM) 튜닝

Windows server 2008부터 Windows Server는 **균형**, **고성능**및 **전원 보호기**의 세 가지 전원 계획을 제공 합니다. **분산** 된 전원 계획은 일반적인 서버 작업 집합에 대 한 최상의 에너지 효율성을 제공 하는 기본 선택입니다. 이 항목에서는 지난 몇 가지 Windows 릴리스에 대해 **분산** 된 구성표의 기본 설정을 결정 하는 데 사용 된 워크 로드에 대해 설명 합니다.

이러한 워크 로드 보다 작업 특성이 크게 다르거나 성능 및 전원 요구 사항이 다른 서버 시스템을 실행 하는 경우 기본 전원 설정 (즉, 사용자 지정 전원 계획 만들기)을 튜닝 하는 것을 고려할 수 있습니다. 유용한 튜닝 정보의 원본 중 하나는 [서버 하드웨어 전원 고려 사항](../power.md)입니다. 또는 **고성능** 전원 계획을 사용자 환경에 적합 한 선택으로 결정할 수 있습니다 .이 경우 일부 수준의 응답성이 증가 하는 경우 exchange에서 상당한 에너지를 사용할 수 있다는 것을 인식 합니다.

> [!IMPORTANT]
> 사용자 지정 항목을 만들어야 하는 특별 한 요구 사항이 없고 작업의 특징에 따라 결과가 달라 지는 것을 충분히 이해 하는 경우를 제외 하 고 Windows Server에 포함 된 전원 정책을 활용 하는 것이 좋습니다.

## <a name="windows-processor-power-tuning-methodology"></a>Windows 프로세서 전원 조정 방법

### <a name="tested-workloads"></a>테스트 된 워크 로드

작업은 "일반" Windows Server 워크 로드의 모범 사례 집합을 포함 하도록 선택 됩니다. 물론이 집합은 전체 실제 서버 환경의 전체를 제공 하기 위한 것이 아닙니다.

각 전원 정책의 튜닝은 다음과 같은 5 가지 워크 로드에 의해 데이터 기반입니다.

- **IIS 웹 서버 작업**

    웹 기본 이라는 Microsoft 내부 벤치 마크는 IIS 웹 서버를 실행 하는 플랫폼의 에너지 효율성을 최적화 하는 데 사용 됩니다. 설치에는 웹 서버와 웹 액세스 트래픽을 시뮬레이트하는 여러 클라이언트가 포함 되어 있습니다. 동적, 정적 핫 (메모리 내) 및 정적 콜드 (디스크 액세스 필요) 웹 페이지의 분포는 프로덕션 서버의 통계 연구를 기반으로 합니다. 서버 CPU 코어를 전체 사용률 (테스트 된 스펙트럼의 한 쪽 끝)에 푸시 하려면 충분 한 빠른 네트워크 및 디스크 리소스가 필요 합니다.

- **SQL Server 데이터베이스 작업**

    [TPC (TPC)](http://www.tpc.org/tpce/default.asp) 벤치 마크는 데이터베이스 성능 분석에 널리 사용 되는 벤치 마크입니다. PPM 튜닝 최적화에 대 한 OLTP 워크 로드를 생성 하는 데 사용 됩니다. 이 워크 로드에는 상당한 디스크 i/o가 있으므로 저장소 시스템 및 메모리 크기에 대 한 성능 요구 사항이 높습니다.

- **파일 서버 작업**

    [Fsct](http://www.snia.org/sites/default/files2/sdc_archives/2009_presentations/tuesday/BartoszNyczkowski-JianYan_FileServerCapacityTool.pdf) 라는 Microsoft에서 개발한 벤치 마크는 SMB 파일 서버 작업을 생성 하는 데 사용 됩니다. 서버에 많은 파일 집합을 만들고 많은 클라이언트 시스템 (실제 또는 가상화 된)을 사용 하 여 파일 열기, 닫기, 읽기 및 쓰기 작업을 생성 합니다. 작업 조합은 프로덕션 서버에 대 한 통계 연구를 기반으로 합니다. CPU, 디스크 및 네트워크 리소스를 과부하 합니다.

- **SPECpower – JAVA 워크 로드**

    [SPECpower \_ ssj2008](http://spec.org/power_ssj2008/) 는 전력 및 성능 특징을 공동으로 평가 하는 최초의 업계 표준 사양 벤치 마크입니다. 다양 한 CPU 로드 수준에서 서버 쪽 Java 워크 로드입니다. 디스크 또는 네트워크 리소스가 많이 필요 하지는 않지만 메모리 대역폭을 위한 특정 요구 사항이 있습니다. 거의 모든 CPU 작업은 사용자 모드에서 수행 됩니다. 커널 모드 작업은 전원 관리 결정을 제외 하 고 벤치 마크의 전원 및 성능 특징에 큰 영향을 주지 않습니다.

- **응용 프로그램 서버 워크 로드**

    [SAP SD](http://global.sap.com/campaigns/benchmark/index.epx) 벤치 마크는 응용 프로그램 서버 워크 로드를 생성 하는 데 사용 됩니다. 데이터베이스와 응용 프로그램 서버가 같은 서버 호스트에 있는 2 계층 설정이 사용 됩니다. 또한이 워크 로드는 다른 테스트 된 작업과 다른 성능 메트릭으로 응답 시간을 활용 합니다. 따라서이는 응답성에서 PPM 매개 변수의 영향을 확인 하는 데 사용 됩니다. 그럼에도 불구 하 고 대기 시간이 중요 한 모든 프로덕션 워크 로드를 나타내지는 않습니다.

SPECpower를 제외한 모든 벤치 마크는 원래 성능 분석을 위해 설계 되었으며, 따라서 최대 부하 수준에서 실행 되도록 만들어졌습니다. 그러나 중간에서 밝은 부하 수준은 실제 프로덕션 서버에 보다 일반적 이며 **균형 잡힌** 계획 최적화에 더 흥미롭습니다. 다양 한 제한 방법 (예: 활성 사용자/클라이언트 수 감소)을 사용 하 여 100%에서 10% (10% 단계)까지 다양 한 부하 수준에서 벤치 마크를 의도적으로 실행 합니다.

### <a name="hardware-configurations"></a>하드웨어 구성

Windows의 각 릴리스에 대 한 최신 프로덕션 서버는 전원 계획 분석 및 최적화 프로세스에서 사용 됩니다. 경우에 따라 릴리스 일정이 다음 Windows 릴리스와 일치 하는 프리 프로덕션 시스템에서 테스트가 수행 된 것입니다.

대부분의 서버는 1 ~ 4 개의 프로세서 소켓으로 판매 되 고, 강화 서버는 주요 문제로 에너지 효율성을 가질 가능성이 낮지만, 전원 계획 최적화 테스트는 주로 2 소켓 및 4 소켓 시스템에서 실행 됩니다. 각 테스트에 대 한 RAM, 디스크 및 네트워크 리소스의 양은 전체 용량까지 각 시스템을 실행 하도록 허용 하는 동시에 구성을 적절 하 게 유지 하는 것과 같이 일반적으로 실제 서버 환경에 적합 한 비용 제한을 고려 합니다.

> [!IMPORTANT]
> 시스템이 최대 부하로 실행 될 수 있지만 일반적으로 가장 낮은 부하 수준에서 일관 되 게 실행 되는 서버는 에너지 효율성이 높은 우선 순위가 아닌 한 고성능 전원 계획을 사용 **하는 것** 이 좋습니다.

### <a name="metrics"></a>메트릭

테스트 된 모든 벤치 마크는 성능 메트릭으로 처리량을 사용 합니다. 응답 시간은 이러한 워크 로드에 대 한 SLA 요구 사항으로 간주 됩니다 (SAP는 기본 메트릭으로 제외). 예를 들어, 평균 또는 최대 응답 시간이 특정 값 보다 작은 경우 벤치 마크 실행은 "유효한" 것으로 간주 됩니다.

따라서 PPM 튜닝 분석은 성능 메트릭으로 처리량을 사용 합니다.  가장 높은 부하 수준 (100% CPU 사용률)에서 목표는 전원 관리 최적화로 인해 처리량이 몇%를 넘지 않아야 한다는 것입니다. 하지만 주요 고려 사항은 보통 및 낮은 부하 수준에서 전원 효율성 (아래에 정의 됨)을 최대화 하는 것입니다.

![전원 효율성 수식](../../media/serverperf-ppm-formula.jpg)

낮은 빈도로 CPU 코어를 실행 하면 에너지 소비가 줄어듭니다. 그러나 빈도가 낮으면 일반적으로 처리량이 줄어들고 응답 시간이 늘어납니다. **분산** 된 전원 계획의 경우 응답성과 전원 효율성의 의도적인 균형이 있습니다. SAP 워크 로드 테스트 및 다른 워크 로드에 대 한 응답 시간 Sla는 이러한 특정 워크 로드에 대 한 응답 시간 증가가 특정 임계값 (예: 5%)을 초과 하지 않는지 확인 합니다.

> [!NOTE]
> 작업에서 성능 메트릭으로 응답 시간을 사용 하는 경우 [빠른 응답 시간에 대 한 권장 되는 균형 잡힌 전원 계획 매개 변수](recommended-balanced-plan-parameters.md)에서 제안 된 대로 시스템에서 **고성능** 전원 계획으로 전환 하거나 **부하가 분산** 된 전원 계획을 변경 해야 합니다.

### <a name="tuning-results"></a>튜닝 결과

Windows Server 2008부터 Microsoft는 Intel 및 AMD를 사용 하 여 각 Windows 릴리스의 최신 서버 프로세서에 대해 PPM 매개 변수를 최적화 했습니다. 여러 부하 수준에서 최상의 전원 효율성을 찾기 위해 앞에서 설명한 각 워크 로드에 대해 엄청난 수의 PPM 매개 변수 조합을 테스트 했습니다. 소프트웨어 알고리즘이 강화 되 고 하드웨어 전원 아키텍처가 진화 함에 따라 각 새 Windows Server는 테스트 된 워크 로드 범위에서 이전 버전 보다 더 높거나 동일한 전원 효율성을 갖습니다.

다음 그림은 Windows Server 2008 r 2를 실행 하는 4 개의 소켓 프로덕션 서버에서 다른 TPC-E 로드 수준 아래의 전원 효율성에 대 한 예를 제공 합니다. Windows Server 2008에 비해 중간 부하 수준에서 8%의 향상 된 기능을 보여 줍니다.

![전원 효율성 비교](../../media/serverperf-ppm-figure1.jpg)

## <a name="customized-tuning-suggestions"></a>사용자 지정 튜닝 제안

기본 워크 로드의 특징이 기본 **분산** 된 전원 계획 PPM 조정에 사용 되는 5 개 작업과 크게 다른 경우, 하나 이상의 PPM 매개 변수를 변경 하 여 사용자 환경에 가장 적합 한 것을 찾을 수 있습니다.

매개 변수의 수와 복잡성으로 인해이 작업은 어려운 작업일 수 있지만 특정 환경에 대 한 에너지 소비량 및 워크 로드 효율성 간의 최상의 균형을 원하는 경우에는이 작업을 할 필요가 있습니다.

 튜닝 가능한 PPM 매개 변수의 전체 집합은 [프로세서 전원 관리 조정](https://msdn.microsoft.com/windows/hardware/gg566941.aspx)에서 찾을 수 있습니다. 시작할 수 있는 가장 간단한 전원 매개 변수는 다음과 같습니다.

-   **프로세서 성능 증가 임계값 및 프로세서 성능 증가** -값이 클수록 성능 응답이 증가 하는 작업의 속도가 느려집니다.

-   **프로세서 성능 감소 임계값** – 높은 값이 유휴 기간에 대 한 전원 응답을 quicken

-   **프로세서 성능 저하** – 유휴 기간 동안 큰 값이 증가 하면 성능이 점차 감소 합니다.

-   **프로세서 성능 증가 정책** – "단일" 정책은 성능 응답을 증가 및 지속적인 활동으로 느려지게 합니다. "로켓" 정책은 증가 하는 활동에 빠르게 반응 합니다.

-   **프로세서 성능 저하 정책** – "단일" 정책은 더 긴 유휴 기간 보다 더 점차적으로 성능 저하를 감소 시킵니다. "로켓" 정책은 유휴 기간을 입력할 때 전원을 매우 빠르게 삭제 합니다.

>[!Important]
> 실험을 시작 하기 전에 먼저 작업을 이해 해야 합니다 .이 작업은 올바른 PPM 매개 변수를 선택 하 고 튜닝 작업을 줄이는 데 도움이 됩니다.

### <a name="understand-high-level-performance-and-power-requirements"></a>높은 수준의 성능 및 전원 요구 사항 이해

워크 로드가 "실시간" (예: glitching 또는 기타 표시 된 최종 사용자에 게 영향을 줄 수 있음) 이거나 매우 긴밀 한 응답성 요구 사항 (예: 주식 중개)이 있는 경우 에너지 소비는 사용자 환경에 대 한 기본 기준이 아닌 경우 **고성능** 전원 요금제로 전환 하는 것이 좋습니다. 그렇지 않으면 워크 로드의 응답 시간 요구 사항을 이해 한 다음, 해당 요구 사항을 충족 하는 최상의 전원 효율성을 위해 PPM 매개 변수를 조정 해야 합니다.

### <a name="understand-underlying-workload-characteristics"></a>기본 워크 로드 특성 이해

작업을 파악 하 고 튜닝할 실험 매개 변수 집합을 디자인 해야 합니다. 예를 들어 CPU 코어의 빈도를 매우 빠르게 심어줍니다 해야 하는 경우 (예: 유휴 기간이 매우 많은 버스 티 워크 로드가 있는 경우) 하지만 새 트랜잭션이 함께 제공 될 때 매우 빠른 응답성이 필요한 경우 프로세서 성능 증가 정책을 "로켓"으로 설정 해야 할 수 있습니다 .이는 이름에서 알 수 있듯이 CPU 코어 빈도를 일정 기간에 따라 단계별로 실행 하는 것이 아니라 최대 값으로 shoots 하는 것입니다.

워크 로드가 매우 버스 티 경우 PPM 확인 간격을 줄여 버스트가 도착 한 후에 CPU 주파수를 더 빨리 시작할 수 있습니다. 워크 로드에 높은 스레드 동시성이 없으면 코어 파킹 기능을 사용 하도록 설정 하 여 더 적은 수의 코어에서 워크 로드를 실행 하도록 할 수 있습니다 .이로 인해 프로세서 캐시 적중률이 향상 될 수도 있습니다.

중간 사용률 수준에서 CPU 주파수를 증가 시키려는 경우 (즉, 가벼운 워크 로드 수준이 아닌) 프로세서 성능 증가/감소 임계값을 조정 하 여 특정 수준의 활동이 관찰 될 때까지 반응 하지 않을 수 있습니다.

### <a name="understand-periodic-behaviors"></a>정기 동작 이해

주간과 야간 또는 주말에 대 한 성능 요구 사항이 서로 다를 수 있으며, 다른 시간에 실행 되는 다른 워크 로드가 있을 수 있습니다. 이 경우 1 PPM 매개 변수 집합이 모든 기간에 대해 최적이 아닐 수 있습니다. 사용자 지정 전원 계획을 여러 개 만들 수 있으므로 다양 한 기간을 조정 하 고 스크립트를 통해 전원 관리를 전환 하거나 동적 시스템 구성의 다른 방법을 사용할 수 있습니다.

이렇게 하면 최적화 프로세스의 복잡성이 증가 하므로 이러한 튜닝 유형에 서 얻을 수 있는 값의 양에 대 한 질문 이며 하드웨어 업그레이드 또는 작업 변경이 중요 한 경우에는 반복 해야 할 가능성이 높습니다.

이는 대부분의 경우 특정 서버에서 특정 작업에 대 한 직접 조정 작업을 수행할 필요가 없기 때문에 Windows에서 **균형** 있는 전원 계획을 처음으로 제공 하는 것입니다.

## <a name="see-also"></a>참고 항목
- [서버 하드웨어에 대한 성능 고려 사항](../index.md)
- [서버 하드웨어에 대한 전원 고려 사항](../power.md)
- [전원 및 성능 튜닝](power-performance-tuning.md)
- [프로세서 전원 관리 튜닝](processor-power-management-tuning.md)
- [분산 전원 계획에 추천되는 매개 변수](recommended-balanced-plan-parameters.md)
