---
title: Hyper-V 구성
description: 성능 조정을 위한 hyper-v 구성 고려 사항
ms.prod: windows-server
ms.technology: performance-tuning-guide
ms.topic: article
ms.author: asmahi; sandysp; jopoulso
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 3fb1001c99e084ab69f37db9779e5d5ae7acf58e
ms.sourcegitcommit: 771db070a3a924c8265944e21bf9bd85350dd93c
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/27/2020
ms.locfileid: "85471438"
---
# <a name="hyper-v-configuration"></a>Hyper-V 구성

## <a name="hardware-selection"></a>하드웨어 선택

Hyper-v를 실행 하는 서버에 대 한 하드웨어 고려 사항은 일반적으로 가상화 되지 않은 서버와 유사 하지만 Hyper-v를 실행 하는 서버는 CPU 사용량이 증가 하 고, 더 많은 메모리를 소비 하며, 서버 통합으로 인해 더 큰 i/o 대역폭이 필요할 수 있습니다.

-   **프로세서**

    Windows Server 2016의 hyper-v는 각 활성 가상 컴퓨터에 하나 이상의 가상 프로세서로 논리 프로세서를 제공 합니다. 이제 hyper-v에서는 EPT (확장 페이지 테이블) 또는 NPT (중첩 된 페이지 테이블)와 같은 SLAT (두 번째 수준 주소 변환) 기술을 지 원하는 프로세서가 필요 합니다.

-   **Cache**

    Hyper-v는 특히 메모리에 작업 집합이 큰 로드와 논리 프로세서에 대 한 가상 프로세서의 비율이 높은 가상 컴퓨터 구성의 경우 큰 프로세서 캐시를 활용할 수 있습니다.

-   **메모리**

    물리적 서버에는 루트 및 자식 파티션에 대해 충분 한 메모리가 필요 합니다. 루트 파티션에는 가상 컴퓨터를 대신 하 여 i/o를 효율적으로 수행 하 고 가상 컴퓨터 스냅숏과 같은 작업을 수행 하는 데 필요한 메모리가 필요 합니다. Hyper-v는 루트 파티션에 충분 한 메모리를 사용할 수 있는지 확인 하 고 남아 있는 메모리를 자식 파티션에 할당할 수 있도록 합니다. 자식 파티션은 각 가상 컴퓨터에 대해 예상 되는 부하의 요구에 따라 크기를 조정 해야 합니다.

-   **스토리지**

    저장소 하드웨어에는 실제 서버에서 호스팅하는 가상 컴퓨터의 현재 및 미래 요구를 충족 하기에 충분 한 i/o 대역폭과 용량이 있어야 합니다. 저장소 컨트롤러 및 디스크를 선택 하 고 RAID 구성을 선택할 때 이러한 요구 사항을 고려 합니다. 디스크를 많이 사용 하는 워크 로드를 사용 하는 가상 컴퓨터를 서로 다른 실제 디스크에 배치 하면 전반적인 성능을 향상 시킬 수 있습니다. 예를 들어 가상 컴퓨터 4 대가 단일 디스크를 공유 하 고 적극적으로 사용 하는 경우 각 가상 컴퓨터는 해당 디스크의 대역폭 중 25%만 생성할 수 있습니다.

## <a name="power-plan-considerations"></a>전원 계획 고려 사항

핵심 기술인 가상화는 서버 워크 로드 밀도를 늘리고, 데이터 센터에 필요한 물리적 서버 수를 줄이고, 운영 효율성을 높이고, 전력 소비 비용을 줄이는 데 유용한 강력한 도구입니다. 전원 관리는 비용 관리에 매우 중요 합니다.

이상적인 데이터 센터 환경에서는 작업을 주로 사용 하 고 유휴 컴퓨터를 끌 때까지 컴퓨터에 작업을 통합 하 여 전원 소비를 관리 합니다. 이 방법을 사용할 수 없는 경우 관리자는 실제 호스트의 전원 계획을 활용 하 여 필요한 것 보다 더 많은 전력을 사용 하지 않도록 할 수 있습니다.

서버 전원 관리 기술은 특히 테 넌 트의 물리적 인프라에 대 한 정책을 지시 하기 위해 테 넌 트 작업을 신뢰할 수 없는 비용으로 제공 됩니다. 호스트 계층 소프트웨어는 전원 소비를 최소화 하면서 처리량을 최대화 하는 방법을 유추할 수 있습니다. 주로 유휴 상태의 컴퓨터에서는이로 인해 실제 인프라에서 보통 전력 그리기가 적절 하다 고 판단 하 여 개별 테 넌 트 워크 로드가 다른 방법 보다 더 느리게 실행 될 수 있습니다.

Windows Server는 다양 한 시나리오에서 가상화를 사용 합니다. 약간 로드 된 IIS 서버에서 사용량이 많은 SQL Server로, Hyper-v를 사용 하 여 서버당 수백 대의 가상 컴퓨터를 실행 하는 클라우드 호스트로 이러한 각 시나리오에는 고유한 하드웨어, 소프트웨어 및 성능 요구 사항이 있을 수 있습니다. 기본적으로 Windows Server는 CPU 사용률을 기반으로 프로세서 성능을 확장 하 여 전원 보존을 가능 하 게 하는 **균형 잡힌** 전원 계획을 사용 하 고 권장 합니다.

**균형 조정** 된 전원 계획을 사용 하는 경우 실제 호스트가 비교적 바쁜 경우에만 가장 높은 전원 상태 (그리고 테 넌 트 워크 로드에서 가장 낮은 응답 대기 시간)가 적용 됩니다. 모든 테 넌 트 워크 로드에 대해 결정적이 고 대기 시간이 짧은 응답 값을 지정 하는 경우 기본 **분산** 된 전원 계획에서 **고성능** 전원 계획으로 전환 하는 것을 고려해 야 합니다. **고성능** 전원 계획은 항상 전체 속도로 프로세서를 실행 하 고, 다른 전원 관리 기술과 함께 수요 기반 전환을 효과적으로 사용 하지 않도록 설정 하 고, 전원 절약을 통해 성능을 최적화 합니다.

물리적 서버 수를 줄이고 가상화 된 워크 로드에 대 한 성능을 극대화 하기 위해 비용 절감에 만족 하는 고객은 **고성능** 전원 계획 사용을 고려해 야 합니다.

인프라를 최적화 하기 위해 전원 계획을 활용 하는 방법에 대 한 추가 권장 사항 및 정보는 [빠른 응답 시간에 대 한 권장 되는 분산 전원 계획 매개 변수](../../hardware/power/recommended-balanced-plan-parameters.md)



## <a name="server-core-installation-option"></a>Server Core 설치 옵션

Windows Server 2016은 Server Core 설치 옵션을 선택 합니다. Server Core는 Hyper-v를 비롯 한 서버 역할의 선택 집합을 호스팅하기 위한 최소 환경을 제공 합니다. 호스트 OS와 더 작은 공격 및 서비스 화면에 대 한 디스크 공간을 더 적게 사용 합니다. 따라서 Hyper-v 가상화 서버는 Server Core 설치 옵션을 사용 하는 것이 좋습니다.

Server Core 설치는 사용자가 로그온 했을 때만 콘솔 창을 제공 하지만 Hyper-v는 관리자가 원격으로 관리할 수 있도록 [Windows Powershell](https://technet.microsoft.com/library/hh848559.aspx) 을 포함 한 원격 관리 기능을 제공 합니다.

## <a name="dedicated-server-role"></a>전용 서버 역할

루트 파티션은 Hyper-v 전용 이어야 합니다. Hyper-v를 실행 하는 서버에서 추가 서버 역할을 실행 하면 가상화 서버의 성능이 저하 될 수 있습니다. 특히 CPU, 메모리 또는 i/o 대역폭을 많이 사용 하는 경우에는 더욱 그렇습니다. 루트 파티션의 서버 역할을 최소화 하면 공격 노출 영역을 줄이는 등의 추가 이점이 있습니다.

일부 소프트웨어는 Hyper-v를 실행 하는 서버의 전반적인 성능에 부정적인 영향을 줄 수 있으므로 시스템 관리자는 루트 파티션에 설치 된 소프트웨어를 신중 하 게 고려해 야 합니다.

## <a name="guest-operating-systems"></a>게스트 운영 체제

Hyper-v는 다양 한 게스트 운영 체제에 대해 및를 지원 합니다. 게스트 당 지원 되는 가상 프로세서 수는 게스트 운영 체제에 따라 다릅니다. 지원 되는 게스트 운영 체제 목록은 [Hyper-v 개요](https://technet.microsoft.com/library/hh831531.aspx)를 참조 하세요.

## <a name="cpu-statistics"></a>CPU 통계

Hyper-v는 가상화 서버의 동작에 대 한 특징을 규정 하 고 리소스 사용을 보고 하는 데 도움이 되는 성능 카운터를 게시 합니다. Windows에서 성능 카운터를 볼 수 있는 표준 도구 집합에는 Hyper-v 성능 카운터를 표시 하 고 기록할 수 있는 성능 모니터 및 Logman.exe 포함 되어 있습니다. 관련 카운터 개체의 이름에는 **hyper-v**접두사가 붙습니다.

항상 Hyper-v 하이퍼바이저 논리 프로세서 성능 카운터를 사용 하 여 물리적 시스템의 CPU 사용량을 측정 해야 합니다. 작업 관리자 및 성능 모니터에서 루트 및 자식 파티션에 보고 하는 CPU 사용률 카운터는 실제 실제 CPU 사용량을 반영 하지 않습니다. 성능을 모니터링 하려면 다음 성능 카운터를 사용 합니다.

- **Hyper-v 하이퍼바이저 논리 프로세서 ( \* ) \\ % 총 실행 시간 (** 논리 프로세서의 비 유휴 시간)

- **Hyper-v 하이퍼바이저 논리 프로세서 ( \* ) \\ % 게스트 런타임** 게스트 내에서 또는 호스트 내에서 주기를 실행 하는 데 걸린 시간

- **Hyper-v 하이퍼바이저 논리적 프로세서 ( \* ) \\ % 하이퍼바이저 런타임** 내에서 실행 하는 데 걸린 시간

- **Hyper-v 하이퍼바이저 루트 가상 프로세서 ( \* ) \\ \\ *** 루트 파티션의 CPU 사용량을 측정 합니다.

- **Hyper-v 하이퍼바이저 가상 프로세서 ( \* ) \\ \\ *** 게스트 파티션의 CPU 사용량을 측정 합니다.


## <a name="additional-references"></a>추가 참조

-   [Hyper-V 용어](terminology.md)

-   [Hyper-V 아키텍처](architecture.md)

-   [Hyper-V 프로세서 성능](processor-performance.md)

-   [Hyper-V 메모리 성능](memory-performance.md)

-   [Hyper-V 스토리지 I/O 성능](storage-io-performance.md)

-   [Hyper-V 네트워크 I/O 성능](network-io-performance.md)

-   [가상화된 환경의 병목 상태 탐지](detecting-virtualized-environment-bottlenecks.md)

-   [Linux Virtual Machines](linux-virtual-machine-considerations.md)
