---
title: 서버 성능 관리자 사용자 가이드
description: 서버 성능 관리자 사용자 가이드
ms.assetid: be99a5a9-b9c0-436b-912c-e5c5839a533d
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: manage
ms.openlocfilehash: 97fab1a36db2e903b3a909bee9e2f1748f7841fd
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59834144"
---
# <a name="server-performance-advisor-users-guide"></a>서버 성능 관리자 사용자 가이드

>적용 대상: Windows Server (반기 채널), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows 10, Windows 8

이 사용자 가이드 Microsoft 서버 성능 Advisor (SPA)에 대 한 다양 한 서버 역할에 배포 된 시스템에 대 한 성능 병목을 SPA를 사용 하는 방법에 대 한 지침을 제공 합니다.

SPA는 다음과 같은 작업을 수 있습니다.

* 서버 성능을 관리 하 고 서버 성능 문제를 해결 합니다.

* 데이터 보고서 및 일반적인 구성 및 성능 문제에 대 한 권장 사항을 제공 합니다.

* 수집 된 데이터를 기반으로 최상의 pratice 권장 사항을 제공 합니다.

> [!NOTE]
> SPA 콘솔 서버에 변경 내용을 만들지 않습니다.

SPA Advisor 팩을 개발 하는 방법에 대 한 자세한 내용은 참조 하십시오. [서버 성능 Advisor 팩 개발 가이드](server-performance-advisor-pack-development-guide.md)합니다.

## <a name="server-performance-advisor-overview"></a>Server Performance Advisor 개요


이 섹션 SPA의 역사에 설명 하 고 해당 대상 및 시나리오에 설명 도구의 아키텍처 개요를 제공 합니다.

### <a name="history-of-spa"></a>SPA의 역사

원래 버전의 Microsoft 서버 성능 SPA (관리자) 2006에 릴리스 되었습니다. 주로 핵심 운영 체제 및 인터넷 정보 서비스 (IIS) 및 active directory와 같은 서버 역할을 포함 하 여 Windows Server 2003을 대상으로 합니다. 도구의 목적은 서버 성능을 평가 하 고 서버 성능 문제를 해결할 수 있도록 하는 것입니다.

SPA 일반적인 구성 및 성능 문제에 대 한 시스템 관리자에 게 데이터를 보고 및 권장 사항을 제공합니다. SPA 서버, 예를 들어 성능 카운터, 레지스트리 키, WMI 쿼리, 구성 파일 및 이벤트 추적에 대 한 ETW (Windows)에서 다양 한 소스에서 성능 관련 데이터를 수집합니다. SPA 수집 하는 서버 성능 데이터에 따라 현재 서버 성능 상황 및 향상 시킬 수에 대 한 권장 사항을 문제에 자세히 살펴보고를 제공할 수 있습니다.

원래 SPA 도구의 1 백만이 넘기 다운로드 되었습니다 하 고 서버 성능을 관리 하는 많은 시스템 관리자는 데도 도움이 되었습니다. 매우 성공적 이었던 성능 문제 해결 도구 되었습니다.

원본 SPA가 출시 된 이후로 몇 가지 주요 변경 사항이 서버 성능 세계 에서입니다. 가장 주목할 만한 릴리스의 Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2 및 Windows Server 2008 인터넷 정보 서비스 (IIS) 8.5 등 해당 서버 역할의 새 버전으로 합니다. Server Performance Advisor의 최신 버전 최근 서버 운영 체제 및 서버 역할에 원본 SPA의 기능을 확장합니다.

SPA 3.1 같은 설계 목표와 원래 도구로 성능 분석 패러다임을 공유한 있지만 최신 기술을 다시 작성 되었습니다 했습니다. 또한 다음과 같은 주요 향상 기능에 있습니다.

* Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2 및 Windows Server 2008을 실행 하는 서버에 대해 분석을 수행할 수 있습니다.

* SPA 3.1 수집 하 고 필요 없이 분석 하는 서버에 코드를 설치 하는 중앙 콘솔에서 데이터를 분석할 수 있는 원격 분석 기능을 지원 합니다.

* Microsoft SQL Server를 사용 하 여 데이터 분석 및 저장소 처리 하 고 많은 양의 데이터를 저장할 수 있게 해줍니다.

* Advisor 팩에서이 도구를 구분합니다. 각 서버 역할에 대 한 성능 분석 논리는 해제 하거나 도구에서 개별적으로 업데이트 될 수 있는 한 advisor 팩의 형태로 해제 됩니다.

* SQL 스크립트와 개방형 아키텍처에서에서 개발 된 Advisor 팩을 제공 합니다. 타사 파티 advisor 팩을 개발 하거나 특별 한 요구를 처리 하기 위해 Microsoft에서 기존 advisor 팩을 확장할 수 있습니다.

* Side by side 비교 보고서와 추세 및 비정상적인 상태를 찾을 수 있도록 기록 차트와 같은 새로운 기능을 지원 합니다.

* 와 같은 기능을 수정, 보고서 및 알림 조정 및 이러한 tunings 다른 사용자와 공유할 SPA 가져오기 및 내보내기 임계값 수 있도록 세밀 하 게 제공 합니다.

* 대상된 서버 그룹을 사용할 수 있는 여러 프로젝트를 지원 합니다.

* SPA 콘솔 내에서 되풀이 데이터 수집을 제공합니다.

* (고급 사용자) 용 Microsoft SQL Server를 사용 하 여 사용자 지정 쿼리 및 보고서 생성을 수 있습니다.

* SPA를 사용 하 여 사용할 수 있는 사용자 지정 된 Windows PowerShell cmdlet

* 가져오기 및 SPA 3.0 데이터베이스에서 보고서 보기에 대 한 이전 버전과 호환성

### <a name="target-audience"></a>대상

SPA 도구는 주로 다양 한 서버 역할에 100 개 미만의 서버를 관리 하는 시스템 관리자에 대 한 설계 되었습니다. 사용할 수 있습니다도 지원 엔지니어가 고객에 대 한 성능 문제를 해결 하 고 성능 데이터를 수집 합니다.

SPA 이며 성능 문제를 해결 하기 위한 권장 사항을 제공합니다 그러나 특정 서버 환경에 적용할 수 있다는 가정 하에 할당 됩니다. SPA를 통해 제공 되는 권장 사항은 고려해 야 제안 합니다. SPA 사용자가 자신의 시스템 구성을 잘 이해, 사용 사례 및 시스템 튜닝의 전체 시스템 동작에 미치는 영향을 예정입니다. 시스템 관리자가 자신의 환경에 SPA 권장 사항을 적용 해야 하는 경우를 결정 해야 합니다.

### <a href="" id="what-s-new-in-spa-3-1-"></a>새로운 기능 SPA 3.1의 새로운 기능?

다음 기능 및 향상 된 기능 SPA 3.1에서 추가 되었습니다.

* Active directory Advisor 팩 server s active directory Domain Services 서버 역할의 일반 성능을 분석할 수 있습니다.

* Advisor 팩에서 손실 된 ETW 이벤트 알림 경고를 추가 하는 개발자를 위한 지원 하 고 경고를 표시 하는 보고서가 생성 되었습니다 이벤트 고주파 로깅 저속 또는 과도 하 게 손실 된 시점과 경합이 디스크

### <a name="target-scenarios"></a>대상 시나리오

다음은 SPA에 대 한 대상 시나리오:

* **서버 환경**

    SPA는 쉽게 설정 하 고 유지 관리 하도록 설계 되었습니다. 1에서 100 까지의 서버를 사용 하는 서버 환경에 적용 됩니다. SPA는 100 개 이상의 서버에 대 한 성능 관리 하려는 경우에 잘 확장 되지 않습니다. 더 크거나 더 복잡 한 환경에 대 한 System Center Operations Manager를 사용 하 여 고려해 야 합니다.

* **성능 문제 해결**

    성능 도구 문제 해결을 SPA를 사용할 수 있습니다. 상위 수준 성능 데이터를 수집 하는 기능을 제공, 철저 한 게시물의 전반적인 시스템 동작을 보다 잘 이해 하면 데이터에 대 한 처리를 수행 하 고 오류를 확인 합니다. 고객이 성능 문제가 의심 되는 경우에 수집 하 고 서버에서 성능 데이터를 분석 SPA를 사용할 수 있습니다.

    SPA 볼 수 있는 보고서를 생성 합니다. SPA 보고서는 잠재적인 문제가 강조 표시 하는 알림 목록 및 다양 한 성과 지표, 구성 및 서버에 대 한 설정을 포함 하는 데이터 섹션에 제공 합니다. 이 보고서를 사용 하 여 특정 성능 문제를 식별 하 고 문제에 대 한 해결 방법을 찾을 권장 사항을 사용할 수 있습니다. 다른 시간에 또는 다른 서버에 의해 생성 된 다른 보고서와 보고서를 비교할 수 있습니다. 이-나란히 비교를 사용 하 여 비정상적인 동작 및 일반 기준 간의 차이점을 확인할 수 있습니다.

    **참고** SPA 디버깅 또는 계량 하지는 못합니다. 또한 서버의 관점에서 읽기 전용 도구를 생각할 수 있습니다 및 서버 구성을 수정 하지 않습니다.

     

* **성능 인덱스 모니터링**

    서버 성능 인덱스를 모니터링 하려면 SPA를 사용할 수 있습니다. 성능 데이터를 수집 하 고 다음는 비정상적인 상태를 파악 하는 기록 차트 또는 추세 차트를 실행 하기 위해 서버에 SPA를 정기적으로 실행 하도록 선택할 수 있습니다. 특정 분석에 대 한 보고서를 볼 지정, 성능 문제에 대 한 자세한 내용은 및 문제를 해결 하려면 다음 권장 사항을 또는 보고서 데이터를 사용 합니다.

### <a name="spa-architecture"></a>SPA 아키텍처

SPA 데이터 컬렉션 논리 성능 로그 및 경고 (PLA) 이라고 하는 Windows에서 프로토콜을 기반으로 합니다. PLA 성능 카운터, WMI 쿼리, ETW 추적, 레지스트리 키 및 구성 파일과 같은 로컬 또는 원격 서버에서 성능 데이터 수집을 수 있습니다. SPA 성능 분석 대상된 서버에서 실행 될 때 선택한 특정 SPA Advisor 팩에 따라 PLA 데이터 수집기 집합을 만듭니다. Advisor 팩을 수집 하는 데이터 원본과 로그를 저장할 수 있는 파일 공유를 포함 합니다. SPA 데이터 컬렉션에만 단일 사용자 계정에 저장 PLA에서 사용 하는 동일한 사용자 계정 되는 로그를 작성 하도 사용 됩니다.

SPA는 SQL Server 데이터베이스를 사용 하 여 대상된 서버에서 수집 된 성능 로그를 저장 합니다. SPA 모든 성능 로그 파일 공유에서 데이터베이스에 가져오고 각 advisor 팩 내에서 데이터 분석 논리를 사용 하 여 데이터를 처리 하는 보고서를 생성 합니다. Advisor 팩 SPA 보고서를 생성 하 고 대상 서버에서 수집 된 성능 데이터를 분석 합니다. Advisor 팩 구축에 대 한 자세한 내용은 참조 하십시오. [서버 성능 Advisor 팩 개발 가이드](server-performance-advisor-pack-development-guide.md)합니다.

SPA 콘솔 사용자 인터페이스와 상호 작용은 SPAConsole.exe의 일부로 작성 됩니다. 데이터베이스에 만들 추가 또는 제거 advisor 팩, 대상 서버 관리, 성능 분석을 실행 하 고 성능 보고서 보기에 콘솔을 사용할 수 있습니다.

SPA 콘솔은 다음 운영 체제에서 실행할 수 있습니다.

* Windows 8.1

* Windows 8

* Windows 7

* Windows Server 2012 R2

* Windows Server 2012

* Windows Server 2008 R2

* Windows Server 2008

일반적인 비즈니스 응용 프로그램에는 세 가지 계층: 프레젠테이션 계층, 비즈니스 논리 계층 및 저장소 계층입니다. SPA 콘솔 및 데이터베이스 2 계층 제품으로 설계 되었습니다. 콘솔은 데이터베이스 역할은 저장소 계층 및 비즈니스 논리 계층을 포함 하는 특정 프로세스와 관련 된 논리와 프레젠테이션 계층으로 사용 됩니다. 콘솔 사용자 입력을 캡처하고 데이터 수집, 처리 및 보고서를 생성 하는 단계를 제어 합니다. SPA는 Windows 시스템 서비스에 종속 되지 않습니다.

다음 다이어그램에서는 SPA 시스템의 상위 수준 아키텍처를 보여 줍니다. 프로세스는.

1.  SPA 콘솔에서 지정 된 서버에서 성능 분석을 실행합니다.

2.  성능 데이터를 수집할 때는 PLA 대상된 서버에는 로그에 기록 다시 데이터 수집기 집합에 지정 된 파일 공유에 있습니다.

3.  데이터 컬렉션을 대상 컴퓨터에 완료 되 면 SPA 콘솔 SQL Server 데이터베이스에 로그를 가져옵니다.

4.  특정 advisor 팩의 데이터 처리 논리를 호출 하는 콘솔입니다.

5.  Advisor 팩 데이터를 처리 하 고 SPA SPA 프레임 워크에 의해 정의 된 시스템 보고서 테이블에 레코드를 삽입 하는 Api를 호출 합니다.

6.  생성 된 보고서를 보려면 콘솔 내 보고서 뷰어를 사용할 수 있습니다. SPA를 성능 문제를 해결할 수 있도록 세 가지 종류의 보고서를 제공 합니다: 단일 보고서, side-by-side-보고서와 추세 또는 기록 차트입니다. 보고서에 대 한 자세한 내용은 참조 하십시오. [보고서를 보는](#bkmk-viewingreports)합니다.

![spa 아키텍처](../media/server-performance-advisor/spa-user-manual-architecture.png)

## <a name="getting-started-with-spa"></a>SPA 시작 하기


### <a name="requirements"></a>요구 사항

Windows 8.1, Windows 8, Windows 7, Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2 및 Windows Server 2008에 SPA 콘솔을 설치할 수 있습니다. 이전 버전의 Windows Server 운영 체제에서 SPA를 실행 하는 것은 지원 되지 않습니다. X86 또는 x64, SPA를 실행 하지만 IA64 또는 ARM 아키텍처를 지원 하지 않습니다.

SPA에서 WPF Windows Presentation Foundation () 2.0의 일부인 Microsoft.NET Framework 4,.NET Framework 4가 필요 하므로 빌드됩니다.

또한 SPA가 설치 되어 있는 동일한 컴퓨터에 SQL Server 2008 R2 Express를 설치 해야 합니다. SQL Server 2008 R2 Express는 Microsoft에서 릴리스된 무료 데이터베이스 엔진입니다. Microsoft 다운로드 센터에서 Microsoft SQL Server 2008 R2 Express를 다운로드할 수 있습니다. SQL Server 2008 R2 Express를 제안 하는 동안 최신 버전의 SQL Server SPA 호환 수도 있습니다.

**참고** SPA 없는 SQL Server 또는.NET Framework SPA 설치 패키지의 일부로. Microsoft SQL Server 2008 r 2와.NET Framework 4.0을 설치한 후 SPA를 설치 하기 전에 Windows Update를 실행 하는 것이 좋습니다.

 

사용자가 만들고 SPA 사용 하 여 데이터베이스를 관리할 수, 때문에 SPA를 실행 하는 데 사용 되는 사용자 계정을 SQL Server와 동일한 관리자 권한이 있어야 합니다.

### <a href="" id="bkmk-setupspa"></a>SPA 설정

SPA SPA 프레임 워크, 고급 시나리오에 사용 되는 Windows PowerShell cmdlet에 대 한 이진을 모두 포함 하는.cab 파일로 패키지 하 고 다음 advisor 팩: 핵심 OS, Hyper-v, active directory 및 IIS입니다. .Cab 파일 폴더에 압축을 푼 후 추가 설치가 필요 하지 않습니다. 그러나 SPA를 실행 하려면 해야 대상 서버에서 데이터 수집을 다음과 같이 사용 합니다.

* PLA 데이터 수집을 실행 하려면 SPA 콘솔을 실행 하는 데 사용할 수 있는 사용자 계정에 대상 서버에서 Administrators 보안 그룹의 일부 여야 합니다. 대상 서버와 콘솔에 있는 경우 동일한 도메인에 도메인 사용자 계정에 대상 서버에서 Administrators 보안 그룹의 일부 이어야 합니다. 콘솔 및 대상 서버는 동일한 도메인에 없는 경우 SPA 콘솔을 실행 하는 데 사용할 수 있는 사용자 계정으로 동일한 사용자 이름 및 암호를 사용 하 여 대상 서버에서 관리 사용자 계정을 만듭니다.

* 서버에서 결과 대 한 공유 폴더를 만듭니다.

* SPA 콘솔 실행을 사용 하는 사용자 계정에 대 한 읽기 및 쓰기 권한이 공유 폴더에 있는지 확인 합니다. 폴더에 로그를 쓸이 계정을 사용 하는 PLA 합니다.
SPA 콘솔 로그를 읽고 데이터베이스로 가져와서 동일한 계정을 사용 합니다.

    **참고** ETW 추적을 저장할 순환 버퍼를 구현 하 고 가능한 경우 공유 폴더로 이동 합니다. 서버 사용량이 또는 쓰기 작업의 속도가 느린 경우 버퍼가 가득 찼을 때 ETW 추적을 삭제 합니다. 중요 한 고속 I/O 액세스를 사용 하 여 서버에 있는 공유 폴더입니다. 각 대상 서버에 공유 폴더 느린 파일 I/O 야기 하는 데이터 손실을 최소화 하는 것이 좋습니다.

     

* 대상 서버에 액세스 하는 PLA, 대상 서버에서 원격 성능 로그 및 경고 액세스를 허용 하도록 Windows 방화벽을 설정 합니다. PLA는 TCP 포트 139를 사용합니다.

* 확인은 **성능 로그 및 경고** 서비스가 실행 되 고 있습니다.

* 콘솔 및 대상 서버가 다른 서브넷에 있으면 또한 설정 해야 원격 IP 주소 필드에 인바운드 방화벽 규칙에는 **범위** 설정에는 **성능 로그 및 경고** 페이지에서 다음과 같이 합니다.

    ![pla 속성](../media/server-performance-advisor/spa-user-manual-pla-firewall.png)

* 콘솔 및 각 대상 서버에 네트워크 검색을 설정 합니다.

* 대상 서버를 도메인에 가입 되어 있지 않으면, 다음 레지스트리 설정을 사용 하도록 설정 합니다. **HKLM\\SOFTWARE\\Microsoft\\Windows\\Currentversion\\Policies\\system\\LocalAccountTokenFilterPolicy**.

**참고** 기본적으로 SPA SpaConsole.exe 있는 폴더에 진단 로그를 기록 합니다. SPA Program Files 폴더 아래에 설치 하는 경우 SPA는 SpaConsole.exe 되 면 로그 관리자 권한으로 실행을 쓸 수만.

콘솔 컴퓨터에 대 한 데이터 분석을 실행 하려는 경우 관리자 권한으로 SPA를 실행 해야 합니다. PLA는 관리자 권한이 있어야 하는 로컬 컴퓨터에 대해 실행 하는 경우 다른 코드 경로 통해 전달 됩니다.

서버에 대해 IIS SPA Advisor 팩을 실행 하려는 경우 WMI 쿼리 및 IIS 서버에 대 한 ETW 추적을 사용 하도록 설정 해야 합니다. 사용 하 여이 수행할 수 **추적** 아래는 **상태 및 진단** 역할 서비스 및 **IIS 관리 스크립트 및 도구** 아래 **관리 도구** 의 **웹 서버 (IIS)** 서버 역할입니다.

 

### <a name="creating-your-first-project"></a>프로젝트 처음 만들기

모든 항목을 설정한 후, 첫 번째 SPA 프로젝트를 만들 수 있습니다. 이전 섹션에서 설명한 대로, SPA 데이터베이스 내의 성능 데이터 분석에 관련 된 모든 정보를 저장 합니다. 각 SPA 프로젝트는 단일 데이터베이스에 해당합니다. 합니다 **사용 하 여 마법사를 처음** 다음 단계를 안내 합니다.

**SPA 프로젝트를 만들려면**

1.  SpaConsole.exe를 시작 합니다. 콘솔은 SPA 모든 데이터베이스에 연결 되지 않은 하 고 주 창이 비어 있는 연결이 끊어진된 모드를 입력 합니다.

2.  새 프로젝트를 만들려면 **파일**, 를 클릭 하 고 **새 프로젝트**합니다. 처음으로 사용 하 여 마법사가 시작 됩니다. 첫 번째 페이지는 마법사를 사용 하는 동안 다음 단계를 보여 줍니다.

    * 데이터베이스 만들기

    * 프로 비전 advisor 팩

    * 대상 서버 목록에 서버를 추가 합니다.

3.  **다음**을 클릭합니다. 합니다 **프로젝트 데이터베이스 만들기** 페이지에서는 데이터베이스를 만들려면 Microsoft SQL Server 인스턴스의 이름을 제공할 수 있습니다. 예를 들어 콘솔와 동일한 컴퓨터에 있으면 사용할 수 **localhost\\&lt;에 SQL server 이름&gt;** 합니다.

    **참고** SQL Server 2008 R2 Express 설치에 대 한 기본 인스턴스 이름은 SQLExpress입니다. SQL Server 2008 R2 Express의 로컬 컴퓨터에 설치 되어 있는 경우에 대 한 데이터베이스는 일반적으로 기본값으로 **localhost\\SQLExpress**합니다. 그러나 것 수 변경 된 SQL Server 설치 중 올바른 SQL Server 인스턴스 이름을 사용 하는지 확인 해야 합니다.

     

4.  데이터베이스 이름을 제공 합니다. 문자, 숫자 및 밑줄 (\_)는 데이터베이스 이름에 사용할 수 있는 문자도 사용할 수 있습니다. SPA 데이터베이스 이름에 대 한 적절 한 제안 사항이 것 **SPA**합니다. 잘못 된 이름을 입력 하면 빨간색 오류 아이콘이 표시 됩니다. 연결 된 도구 설명 유효성 검사 오류에 대 한 이유를 제공합니다.

    **참고** 프로젝트에 대 한 식별자만 이므로 중요 데이터베이스 이름과 서버 인스턴스 이름을 기억할 것입니다. 이 데이터베이스로 전환 하려는 경우이 정보를 제공 해야 합니다.

     

5.  서버 인스턴스 이름과 데이터베이스 이름을 제공 하면 처음으로 사용 하 여 마법사 생성 데이터베이스 파일의 위치입니다.

6.  에 **프로젝트 데이터베이스를 만들** 페이지에서 클릭 **다음**합니다. 처음으로 마법사를 사용 하 여 데이터베이스를 만들고 데이터베이스의 모든 SPA 관련 데이터베이스 스키마, 함수 및 저장된 프로시저를 생성 합니다. 이 단계에는 하드웨어 및 네트워크 속도 따라 몇 초 정도 걸릴 수 있습니다.

    **참고** 이 단계가 실패 하면 오류 메시지가 나타납니다. 일반적인 문제는 다음과 같습니다. 콘솔 데이터베이스를 만들 권한이 없습니다. SQL Server 인스턴스에 연결할 수 없습니다 또는 데이터베이스 이름이 이미 있습니다.

     

7.  이전 단계 성공 시를 표시 합니다 **advisor 팩 프로 비전** 페이지입니다. 컴퓨터에서 사용할 수 있는 모든 advisor 팩을 나열 합니다. 명명 된 폴더를 자동으로 검색 하는 SPA **Ap** SPA 루트 디렉터리 아래입니다. 전체 이름, 버전 및 각 advisor 팩 저자를 나열합니다.

    **참고** 전체 이름 및 버전 SPA에서 사용 하는 방법에 대 한 자세한 내용은 참조 하세요. [advisor 팩 관리](#bkmk-manageadvisorpacks)

     

8.  프로젝트 데이터베이스에 프로 비전을 클릭 한 다음 원하는 어떤 advisor 팩 선택 **다음**합니다. 클릭할 **건너뛰기** 모든 advisor 팩 프로 비전 하지 않고 다음 단계를 진행할 수 있습니다.

    **참고** 언제 든 지가 도구를 사용 하는 advisor 팩을 제공할 수 있습니다. 자세한 내용은 참조 [advisor 팩 관리](#bkmk-manageadvisorpacks)합니다.

     

9.  에 **서버 추가** 추가할 대상 서버 목록에는 두 개의 필수 필드에 맞게 각 서버에 대 한 페이지에서: **서버의 이름을** 하 고 **파일 공유 위치**합니다.

    **참고** 이기도 한 **묶어 표시** 분류 또는 서버를 찾을에 주로 사용 되는 필드입니다. 많은 서버 수 있는 경우에는 서버 이름, 결과 폴더 및 선택적 설명 필드를 포함 하는 쉼표로 구분 된 값 (.csv) 파일을 가져올 수 있습니다. 합니다 **묶어 표시** 필드는 서버에 설명 하는 데 사용 되 고 용어를 사용 하 여 데이터 컬렉션에 대 한 서버를 필터링 할 수 있습니다. .Csv 파일을 통해 서버를 초기화 하는 경우 파일 내에서 구문 분석 오류는 서버를 로드 하지 않습니다.

     

10. 여러 구성에 설명 된 대로 PLA 데이터 수집을 사용 하도록 설정 해야 [SPA 설정](#bkmk-setupspa)합니다. 합니다 **서버 추가** 페이지 구성 문제를 해결 하기 위해 테스트 구성 기능을 제공 합니다. 컴퓨터와 관련 된 확인란을 선택한 다음 클릭 **연결 테스트**합니다. SPA를 대상 서버에서 설정 하는 데이터 수집기를 생성 하려고 하 고 결과 데이터베이스에 다시 가져옵니다. 모든 항목이 올바르면는 **상태** 표시 **전달**합니다. 실패 한 경우 실패 한 이유를 설명 하는 도구 설명이 나타납니다.

11. 구성 테스트를 통과 하지 않는 경우에에 자동으로 데이터베이스에 추가 각 서버. 목록에서 서버를 제거 하려면 서버 이름을 선택 하 고 클릭 **제거**합니다.

12. 모든 항목에 다음이 완료 되 면 클릭 **완료** 를 처음 사용 하 여 마법사를 닫습니다. 완료 하기 전에 처음으로 사용 하 여 마법사를 닫은 경우 이전 단계를 모두 유지 하 고 그 중 자동 롤백. 향후 변경 내용을 수동으로 확인 해야 합니다.

## <a name="running-analysis"></a>분석 실행


데이터베이스를 설정한 후 서버에서 성능 분석을 실행할 수 있습니다.

SPA 콘솔이 시작 될 때마다 현재 사용자가 사용 된 마지막으로 프로젝트는 자동으로 열립니다. 주 창에는 서버 목록이 포함 되어 있습니다. 각 서버에는 다음 네 가지 속성이 있습니다. 서버 이름, 분석 결과, 현재 상태 및 묶어 표시 합니다.

* **서버 이름** 서버를 서버에 대 한 식별자의 이름입니다. 중복 된 이름이 허용 됩니다.

* **분석 결과** 기본적으로 표시 최신 성능 분석의 결과 서버에 대해 실행 합니다. 표시는 서버에 대해 실행 성능 분석 되지 않은, 경우 **보고서**합니다. 보고서에 의해 발생 하는 경고 인 경우 표시 **경고** 및 최신 보고서가 생성 된 때의 타임 스탬프입니다. 문제가 없습니다. 서버에서 최신 분석 하는 동안 발견 되었습니다 경우 표시 **확인** 및 타임 스탬프입니다.

    **참고** 시스템 설정을 최근에 변경한 경우 변경의 전체 영향을 평가 하 고 시스템 상태는 업데이트 된 보고서를 다시 분석을 실행 하는 것이 좋습니다. SPA는 테스트 대상 시스템에 구성 변경 내용을 추적 하지 않습니다.

     

* **현재 상태** 현재 서버에서 실행 하는 분석 작업의 성능 상태를 보여 줍니다. 클릭 하 여 실행 중인 작업을 취소할 수는 **취소** 아이콘이 빨간색 X로 표시 되어 있습니다.

* **주석** 현재 대상 서버에 설명 합니다. 예를 들어, 서버 역할 (예: SQL Server) 또는 위치 (예를 들어, Kent)를 사용 하 여 서버를 설명할 수 있습니다. SPA를 사용 합니다 **서버 이름** 및 **묶어 표시** 검색 하 고 적절 한 서버를 찾을 수 있도록 합니다. 검색 텍스트 상자에 입력할 수 있습니다. 경우는 **서버 이름** 하거나 **묶어 표시** 검색 상자에 입력 된 정확한 문자열을 포함 하는 열 서버가 서버 목록에 표시 됩니다.

다음 컨트롤은 콘솔에 사용할 수도 있습니다.

* **반복** 시간 간격을 기반으로 하는 컬렉션을 정기적으로 반복 하는 기능을 설명 하는 확인란입니다. 대부분의 서버 설치에 대 한 분석을 위한 충분 한 기록을 저장 1 시간 마다 반복 SPA 수집 싶을 것입니다. 선택 하지는 컬렉션을 한 번만 실행 하려는 경우는 **반복** 확인란입니다.

* **되풀이 제거** 진행을 취소할 수 있도록 단추 컬렉션 작업을 반복 합니다. 반복 수집을 취소 하지만 하지는 현재 컬렉션 (있는 경우)가 진행 중인 합니다. 이 옵션을 사용 하는 새 컬렉션을 반복 간격을 다시 설정 하거나 컬렉션을 수동으로 실행할 수 있습니다.

성능 분석을 시작 하기 전에 데이터 컬렉션 기간을 선택 합니다. 더 많은 데이터를 수집 하는 서버 성능 사항을 보다 정확 하 게 이미지를 제공 하는 데 도움이 되지만 많은 수의 로그를 생성 되며 잠재적인 영향이 더 서버의 필요도 없습니다 수 있습니다. 특정 필요에 따라 적절 한 데이터 컬렉션 기간을 선택 합니다. 각 advisor 팩 최소 유효한 기간을 정의합니다. 데이터 컬렉션 기간을 선택 하면 선택한 advisor 팩의 최소 지속 시간 보다 긴 이어야 합니다.

대상 서버에서 성능 분석을 실행 하려면,에 대 한 성능 분석을 실행 하 고 클릭 하려는 서버를 선택 합니다 * * 분석 실행 * * 대화 상자가 표시 되 고 서버에서 실행 되도록 advisor 팩을 선택할 수 있습니다. 선택한 advisor 팩 동시에 실행 합니다. 생성 되는 보고서는 동일한 시간 동안 수집 된 성능 데이터를 기반으로 합니다.

**참고** 되풀이 성능 분석 실행 되 고 있는 서버를 선택 합니다 **되풀이 제거** 단추를 사용 하면 되풀이 데이터 수집을 취소할 수 있습니다. SPA는 동일한 컴퓨터에 동시에 여러 데이터 수집 세션을 허용 하지 않습니다.

 

## <a href="" id="bkmk-viewingreports"></a>보고서 보기


SPA에는 세 가지 유형의 성능 분석 보고서 단일 보고서, side-by-side-보고서와 추세 및 기록 그래프입니다.

실행 중인 성능 분석 후, 각 대상 컴퓨터에서 실행할 advisor 팩에 대 한 보고서가 생성 됩니다. 주 창에서 서버 목록에서 확장할 수 있습니다 **분석 결과** 특정 서버에서 실행 된 모든 advisor 팩을 볼 수 있습니다. 단일 보고서를 보려면 보고서 이름을 클릭할 수 있습니다.

Advisor 팩 이름 옆에 있는 서버에서 실행 되는 최신 분석의 상태를 보여 주는 세 개의 아이콘이 있습니다.

* **최신** 아이콘 advisor 팩에 대 한이 서버에는 최신 성능 분석에 의해 생성 된 보고서를 보여 줍니다.

* 합니다 **찾을** 아이콘 목록이 표시 성능 분석 보고서 정확한 보고서를 선택할 수 있습니다. **Advisor 팩** 및 **대상 서버** 필드는 미리 채워진 현재 advisor 팩 및 대상 서버 정보를 사용 합니다. 기본 시간 범위는 1 주일으로 설정 되어 및 종료 날짜 오늘로 설정 되어 있습니다. 클릭 하면는 **검색** 단추 오른쪽 위 모퉁이에서 시간 범위 내에서 선택한 서버 및 advisor 팩에 대 한 모든 성능 분석 보고서 목록을 가져올 수 있습니다.

* **차트 보기** 아이콘은 추세 및 기록 차트 보기를 엽니다.

다음 그림에서는 합니다 **최신**를 **찾을**, 및 **차트 보기** 각 advisor 팩 후 아이콘:

![보고서 아이콘](../media/server-performance-advisor/spa-user-manual-report-icons.png)

### <a name="searching-for-and-within-reports"></a>검색 하 고 보고서 내에서

사용 하 여 보고서에 대 한 검색이 수행 **보고서 탐색기**합니다. 이렇게 하면 날짜 범위, 서버 이름 및 advisor 팩 여 보고서를 검색할 수 있습니다. 이 관심 마지막 실행된 보고서 이외의 보고서를 찾을 것이 좋습니다. 마지막 실행된 보고서를 통해 사용할 수 **보고서 보기** 해당 서버에 대 한 합니다.

특정 보고서를 볼 때 쉽게 시간별 다음 및 이전 보고서로 이동 하거나 동시에 실행 하면 다른 AP와 같은 관련된 보고서를 볼 수 있습니다. 이러한 옵션은 아래에서 사용할 수 있는 **작업**합니다.

보고서 내에서 검색도 가능 합니다. 보고서의 수를 **찾을** 문자열 검색 상자는 보고서 내에서 빠른 텍스트 문자열 검색에 사용할 수 있습니다. 텍스트 상자를 제거 하려면 해제할 수 있습니다. Windows의 텍스트를 검색 하는 검색 상자를 활성화 하려면 컨트롤 + F를 사용할 수 바로 가기 합니다. **찾을** 상자를 사용 하면 대/소문자 구분 검색을 사용 하 여 적절 하 게 지정 합니다 **소문자** 옵션.

다음 그림에서는 합니다 **찾을** 문자열을 사용 하 여 검색 상자 **Power** 에 **보고서** 탭 합니다.

![찾기 검색 상자](../media/server-performance-advisor/spa-user-manual-find-search-box.png)

### <a name="single-report"></a>단일 보고서

단일 보고서를 단일 컴퓨터에서 실행 하는 단일 advisor 팩에서에서 성능 분석 결과 보여 줍니다. 보고서에는 advisor 팩의 이름, 보고서 생성 시간 및 데이터 수집에 대 한 기간, 대상 서버 이름 표시 됩니다.

단일 보고서에는 알림 섹션과 데이터 섹션이 포함 되어 있습니다.

### <a name="notification-section"></a>알림 섹션

알림 섹션의 성능 분석 규칙의 집합으로 구성 됩니다. 각 알림 일부 데이터 원본, 몇 가지 임계값 및 일부 비즈니스 논리를 포함합니다. 성능 분석을 실행할 때 비즈니스 논리 규칙 또는 성공 여부를 결정 하는 임계값에 대 한 데이터 소스를 평가 합니다. 그렇지 않은 경우 경고가 나타납니다 잠재적 성능 문제에 대 한 사용자에 게 알립니다. 또한 문제를 해결 하기 위한 권장 사항을 제공 합니다. 알림 섹션은 항상 단일 보고서 보기에서 첫 번째 탭입니다.

알림 섹션은 두 부분으로 구분 됩니다. **경고** 하 고 **다른 알림을**합니다.

에 경고가 표시 규칙에 대 한 데이터 원본을 논리 및 임계값 설정에 따라 특정 조건을 충족 하는 경우는 **경고** 영역입니다. 경고에는 다음과 같은 부분이 포함 됩니다.

* 경고 아이콘 잠재적 문제가 있는지 여부를 나타냅니다.

* 규칙 이름입니다. 예를 들어 **네트워크 수신 패킷 삭제** 은 규칙 세부 정보 페이지를 가리키는 링크에 설명 된 대로 [advisor 팩 관리](#bkmk-manageadvisorpacks)합니다.

* 잠재적인 문제에 대 한 간단한 설명입니다.

* 잠재적인 성능 문제를 가능한 솔루션에 대 한 권장 합니다.

서로 다른 서버 매우 다른 구성 및 사용 패턴을 지정할 수 있고 임계값 및 모든 조건에서 모든 서버에 대해 적용 되는 규칙을 설정할 수 없습니다. SPA는 임계값을 수정 하는 기능을 제공 합니다. 또한 규칙 시나리오에 적용 되지 않는 경우 규칙을 사용 하지 않도록 설정할 수 있습니다. 모든 규칙은 기본적으로 사용 됩니다. 비활성화 된 규칙을 알림 영역에 표시 되지 않습니다. 자세한 내용은 참조 하십시오. [advisor 팩 관리](#bkmk-manageadvisorpacks)합니다.

**다른 알림을** 영역은 다른 모든 규칙, 경고 없이 발생 하거나 규칙을 적용할 수 없는 위치에 포함 되어 있습니다. 볼 수 있는 비슷한 구성 요소가 포함 된 **경고** 영역입니다. 가장 큰 차이점은 아무런 경고는 발생 하는 경우 규칙이 적용 되지 않습니다. 일반적으로 권장 사항 없음 제공 됨.

### <a name="data-sections"></a>데이터 섹션

데이터 단원 advisor 팩 생성 성능 데이터의 대상 서버에서 수집 된 원시 데이터를 기반으로 합니다. 데이터 섹션에는 여러 수준의 하위 섹션 및 최상위 섹션 집합이 포함 됩니다. 최상위 섹션은 탭으로 표시 됩니다. 최상위 섹션 아래의 모든 하위 섹션은 확장 가능한 영역에 표시 됩니다. 축소 하거나 다음 그림에 나와 있는 것 처럼 각 관심 분야의 영역에 초점을 맞춥니다 섹션을 확장할 수 있습니다.

![데이터 섹션](../media/server-performance-advisor/spa-user-manual-data-sections.png)

핵심 OS SPA Advisor 팩 및 IIS SPA Advisor 팩 포함 한 **시스템 개요** 섹션입니다. 이 단원의 리소스 사용 및 구성 하는 방법에 대 한 최상위 정보에 설명 합니다. 다른 최상위 섹션의 성능 데이터 영역을 나타냅니다. SPA는 다음과 같은 방법으로 보고서 데이터를 제공합니다.

* **단일 값** 키/값 쌍입니다. 키는 값의 의미를 나타내는 문자열입니다. 값은 문자열, 숫자 값 또는 부울 값을 수 있습니다. 이 구성 예를 들어 CPU 아키텍처, 총 메모리 크기 및 BIOS 버전은 시간이 지나도 변경 되지 않는 같은 정적 정보를 표시 하려면 종종 사용 됩니다.

* **값 목록** 는 키/값 쌍이 경우가 있지만 목록 값에는 여러 필드가 포함 될 수 있습니다. 예를 들어 여러 열과 여러 행으로 테이블에는 CPU의 특성을 표시할 수 있습니다. 각 행은 하나의 CPU 나타내며 각 열에는 CPU의 특성을 나타냅니다.

* **통계** 는 특수 한 형식의 단일 값 간주 될 수 있습니다. 숫자 데이터만 포함할 수 있습니다. 데이터 수집 하는 동안 최신 상수 대신 변동 다양 한 숫자 데이터 요소입니다. 예를 들어 CPU 사용량에는 성능 카운터를 수집 하는 PLA 때마다를 변경 됩니다. 단일 값만 표시 성능 상황을 정확 하 게 반영할 수 없습니다. 하나의 값만을 표시 하는 대신 평균, 최대값, 최소값, 및 90% 값은 이러한 동적 숫자 데이터 요소에 사용 됩니다. 90% 값은 해당 컬렉션을 지정 된 간격에 해당 카운터에 대 한 모든 이벤트에서 90 번째 백분위 수 이상 또는 활동을 나타냅니다.

* **목록의 맨 위에** 일반적으로 특정 리소스 또는 특정 이벤트가 발생 하는 최상위 엔터티의 상위 소비자를 포함 합니다. 예를 들어 **평균 CPU 사용 측면에서 처리 하는 상위 10 개** 데이터 수집 하는 동안 평균 CPU 사용량이 가장 높은 상위 10 개 프로세스를 포함 합니다. CPU 사용량이 때문에 동적 숫자 데이터 요소, 최대, 최소, 및 90% 값 등의 기타 통계에에서도 나와 사용자의 CPU 소비 더 완전 한 시야를 제공 하는 목록을 합니다.

이전 섹션에서 설명 했 듯이 SPA PLA ETW 추적, WMI 쿼리, 성능 카운터, 레지스트리 키 및 보고서를 생성 하는 구성 파일을 수집 하는 사용 합니다. 것이 데이터 원본 보고서의 각 데이터 요소를 이해 하는 중요 합니다. SPA 도구 설명을 통해 이러한 정보를 제공 합니다. 키 열 이나 행을 데이터 소스 도구 설명을 보려면 마우스로 수 있습니다. 예를 들어 **WMI:Win32\_DisDrive: 캡션** 은 데이터 원본이 WMI 쿼리에서 WMI 클래스 이름에는 Win32 의미\_DiskDrive, 및 속성은 **캡션**합니다.

### <a href="" id="side-by-side-report-"></a>Side-by-side-보고서

단일 보고서에는 문제에 도움이 되는 사용자 찾기 잠재적인 성능, 알림 및 데이터 섹션 제공 있지만 단일 보고서를 직접 확인 하 여 잠재적 성능 문제를 식별 하기 어려운 경우가 많습니다. 이 통해 잠재적인 문제 찾기 어려운 데이터 요소가 너무 많아서 단일 보고서에 포함할 수 있습니다.

이 문제를 해결 하려면 SPA는 두 개의 보고서를 비교 하는 기능을 제공 합니다. 차이점을 찾을 수 있도록 초기 보고서에 잠재적인 문제를 사용 하 여 보고서를 비교할 수 있습니다.

Side-by-side-보고서에서 단일 보고서 뷰어 시작 될 수 있습니다. 사용자가 클릭할 수 **작업**를 클릭 하 고 **보고서를 비교** 보고서를 선택할 수 있습니다. 동일한 advisor 팩에서 보고서를 비교 하는 의미가 됩니다. 시간, 시간 내에 다음 보고서 또는 검색 기능을 통해 선택 된 임의의 보고서는 이전 보고서를 사용 하 여 보고서를 비교할 수 있습니다. 예를 들어 비정상적인 동작을 격리 하기 비슷한 서버 역할이 있는 다른 컴퓨터에서 생성 된 보고서 또는 동일한 컴퓨터에 다른 시간에 생성 된 보고서에 초기 서버 보고서를 비교 하 고 불러올 수 있습니다.

Side-by-side-보고서를 단일 보고서와 매우 비슷하며 합니다. 알림 섹션과 데이터 섹션이 포함 됩니다. 단일 보고서 뷰어로 알림 및 데이터 섹션의 동일한 번호를 포함 합니다. 유일한 차이점은-병렬 방식으로 보고서는 표시 된 것입니다. 각 섹션에는 보고서의에서 데이터 원본 (보고서 1)와 대상 보고서 (보고서 2) 포함 되어 있습니다. Side-by-side-보고서 보고서를 생성 하는 시간 및 각 보고서에 대 한 데이터 수집 기간 (보고서 왼쪽에는 1) 및 보고서 2 오른쪽에 대상 서버의 이름 advisor 팩의 이름을 표시 합니다.

해제 하는 경우는 **찾을** 대화 상자를 다시 활성화할 수 제어 + 6.를 입력 하 여 이 대화 상자를 찾아 현재 섹션 내에서 텍스트 문자열을 강조 표시 합니다.

알림 섹션에서 경고를 비교 하는 두 개의 보고서에서 결과 중 하나라도 나열 됩니다는 **경고** 영역입니다. 결과 목록의 고, 그렇지 합니다 **다른 알림을** 영역입니다. Side-by-side-보고서에 대 한 키 보고서 간의 차이점을 식별 하는 이기 때문에 규칙에 대 한 자세한 정보 없음이 표시 됩니다. 사용자가 규칙에 대 한 자세한 내용은 규칙 세부 정보 폼을 표시 하려면 규칙 이름을 클릭 합니다.

데이터 섹션에 있는 데이터는 보고서의 왼쪽에는 1에서 데이터 및 보고서 2 오른쪽의 데이터와 함께 방식으로 표시 됩니다. SPA 열에 레이블을 지정 하지 않고 같은 테이블의 단일 값을 보여 줍니다 **값**, 이름이 지정 되어 **보고서 1** 및 **보고서 2** 각각. Side-by-side-보고서 side-by-side-테이블의 다른 모든 형태의 데이터를 표시합니다.

Side-by-side-보고서 뷰어는 또한 데이터 원본에 대 한 도구 설명을 제공합니다.

### <a name="historical-and-trend-charts"></a>기록 및 추세 차트

만 편이 추세 및 특정 서버 및 특정 advisor 팩에 대 한 기록 차트를 표시 합니다. 시간 범위 (기본적으로 선택 됩니다 지난 주)를 선택한 다음 클릭 해야 **확인** 추세 및 기록 차트 뷰어를 표시 합니다.

추세 및 기록 차트 뷰어에 세 개의 탭: 기록 차트, 24 시간 추세 차트 및 7 일 추세 차트입니다.

### <a name="historical-chart"></a>기록 차트

기록 차트에는 일련의 지정 된 기간을 통해 숫자 데이터 요소에 대 한 값을 보여 줍니다. 예를 들어는 **평균 요청 대기 시간** IIS 지난 15 일에 대 한 단일 서버에 대 한 합니다. 각 데이터 요소에 기록 된 차트의 한 성능 분석 세션에서 수행 된 특정 데이터 소스 값을 나타냅니다.

기록 차트를 사용 하는 방법 중 몇 가지가 있습니다.

1.  예를 들어 데이터 요소에 대 한 특정 시간에 매일 오전 2 시에 비정상적인 상태를 찾을 수 있도록 합니다 **평균 요청 대기 시간** iis 이동 약 200 밀리초에서 500 밀리초입니다.

2.  여러 데이터 요소 상관 관계를 지정 하려면. 예를 보여 주는 **평균 요청 대기 시간** 및 **평균 요청 수** 지난 15 일 동안 함께 합니다. 요청 대기 시간 및 요청 대기 시간 증가 요청 수가 증가 하는 원인은 일으킬 수 있는 요청 수 증가 스폿 동시에 보고서를 표시할 수 있습니다.

기록 된 차트에서 사용자가 다음을 수행할 수 있습니다.

* 차트 영역에 여러 데이터 계열을 표시 합니다. 각 데이터 계열의 보고서 뷰어에서 꺾은선형 차트로 표시 됩니다. 각 꺾은선형 차트는 보고서 뷰어에 맞게 자동으로 확장 됩니다.

* 추가 하거나 기록 차트 뷰어 맨 아래에 있는 데이터 계열 목록에서 데이터 계열을 제거 합니다.

* 표시 하거나 데이터 계열 목록에서 데이터 계열을 숨깁니다. 사용자가 특정 데이터 계열 차트 영역에 해당 하는 꺾은선형 차트를 강조 표시 하려면 목록에서 클릭 합니다.

* 차트 영역 내부에 시간 간격을 선택 하 여 특정 기간 확대 합니다. 축소 하려면 차트의 왼쪽 아래 모서리에 있는 단추를 클릭 합니다.

* 특정 데이터 요소를 두 번 클릭 하 여 단일 보고서를 조사 합니다.

* 데이터를 복사 하 고 Microsoft Excel과 같은 다른 프로그램을 사용할 수 있도록 합니다. 이 차트 기능을 적절 한 경우 Microsoft Excel을 활용할 수 있습니다.

### <a name="trend-charts"></a>추세 차트

반복적인 성능 문제를 해결할 정기 작업 또는 대상 서버에 대해 실행 중인 경우 발생 합니다. 예를 들어, 주말, 엔터테인먼트 지향 웹 사이트는 더 많은 적중 표시 될 수 또는 일정 디스크 백업 작업을 매일 오전 2 시에 서버 성능 중단 시킬 수 있습니다.

이러한 성능 문제를 찾을 수 있도록 추세 차트를 사용할 수 있습니다. 성능 문제는 다양 한 패턴에 반복적으로 발생할 수 있습니다. 가장 일반적인 패턴은 매일 패턴 및 주 단위 패턴은 하루 또는 한 주의 같은 날 같은 시간 동안 성능 문제가 발생 하는 위치입니다. 따라서 SPA는 24 시간 추세 차트 및 7 일 추세 차트를 제공합니다.

하루 중 시간을 기반으로 추세를 찾고 및 추세 분석 그래프 데이터의 집합을 보다 자세히 조사를 제공 합니다. X 축 0부터 시작 하는 24 시간 동안으로 설정 된: 00 (자정)에서 23시 59분에서 끝나는 합니다. SPA는 동시에 여러 데이터 계열에 대 한 추세를 표시 하지 않습니다. 클릭할 수 **데이터 계열을 선택** 을 보려는 데이터 계열을 선택 합니다.

데이터를 처리 하려면 SPA를 찾고 모든 스냅숏을 0: 00과 0:59 시간에 따라 합니다. SPA는 최소값, 최대값, 평균, 및 해당 시간 동안 수행 된 스냅숏 집합에 대 한 시그마 값을 결정 하며 원통형 차트와 그래프로 표시 하는 해당 됩니다. SPA는 스냅숏을 여러 1시 1시 59분 다음 2시 2시 59분 사이 대 한 프로세스를 반복 합니다. 주어진된 시간에 대 한 스냅숏이 없습니다 있으면 SPA가 해당 시간을 비워 두면 그래프를 다음 시간 이동 합니다.

7 일 추세 차트는 24 시간 추세 차트와 매우 비슷합니다. 유일한 차이점은 하루 중 시간 대신 요일에 따라 데이터 계열 그룹화 하는 것입니다.

추세 및 기록 차트에서 선택한 데이터 계열은 사용자 기본 설정으로 저장 됩니다. 다음에는 추세 및 기록 차트 뷰어를 여는 동일한 advisor 팩에 대 한, 동일한 데이터 계열 집합이 기본적으로 나열 됩니다.

## <a name="managing-reports"></a>보고서 관리


### <a name="deleting-reports"></a>보고서 삭제

SPA에서 관리 해야 하는 보고서의 수를 최소화 하기 위해 보고서를 제거할 수 있습니다. 보고서 및 서버의 수, 빈도 따라 불필요 한 보고서를 삭제 하는 것이 좋습니다. SPA 관리할 수 있는 보고서에는 제한이 수 없는 동안 기본 데이터베이스 크기 제한이 있을 수 있습니다.

**참고** 삭제 보고서를 삭제 취소 될 수 없습니다.

 

### <a name="exporting-and-importing-reports"></a>내보내기 및 보고서 가져오기

보고서를 다른 SPA 콘솔 또는 다른 사용자에 게 전자 메일 전송에 XML 파일로 내보낼 수 있습니다. 보고서를 내보내는 보고서는 삭제 되지 않습니다. 현재 표시 된 보고서를 내보내려면 **보고서 뷰어**, 클릭 **작업**, 를 클릭 하 고 **내보내기**합니다. 여러 보고서를 내보내려면 **보고서 탐색기**, 클릭 **다중 사용 선택**, 선택 상자에서 여러 보고서를 선택 하 고 클릭 **내보내기**합니다. 이 선택한 대상 디렉터리로 XML 형식으로 보고서를 내보냅니다.

SPA에서 내보낸된 보고서를 볼 수 있습니다. 가져온된 보고서 SPA 데이터베이스에 추가 되지 않습니다. 기본적으로 역할 내보낸된 보고서에 대 한 XML 뷰어 응용 프로그램을 보관 합니다. 가져온된 보고서에 대 한 서버를 동일한 advisor 팩을 설치 하려면 원래 내보낸된 보고서 SPA 콘솔과 필요는 없습니다.

## <a href="" id="bkmk-manageadvisorpacks"></a>Advisor 팩 관리


SPA는 핵심 운영 체제, Hyper-v, active directory 및 IIS에 대 한 advisor 팩을 포함합니다. SPA는 또한 타사 개발자 advisor 팩의 버전을 작성할 수 있으므로 SQL를 사용 하 여 advisor 팩을 개발 하기 위한 개방형 아키텍처를 제공 합니다. Advisor 팩을 관리 하기 위한 네 가지 옵션이 있습니다: 프로 비전, 사용자 지정 다시 설정 또는 제거 합니다.

### <a name="provision-new-advisor-packs"></a>프로 비전 새 advisor 팩

Microsoft 또는 타사 개발자가 새로운 advisor 팩을 릴리스할 수 있습니다. Advisor 팩에는 provisionMetaData.xml 및 논리를 설명 하는 SQL 스크립트 집합을 포함 됩니다.

**프로 비전 새 advisor 팩**

1.  아래에서 advisor 팩의 모든 콘텐츠를 복사 합니다 *% SpaRoot %*\\Ap 디렉터리입니다.

2.  주 창에서 클릭 **구성**, 를 클릭 하 고 **Advisor 팩 구성**합니다. **Advisor 팩 구성** 대화 상자가 열립니다.

    **참고** 이 대화 상자는 비슷합니다는 **advisor 팩 프로 비전** 처음으로 사용 하 여 마법사 페이지입니다. 관리에 사용할 수 있는 advisor 팩의 목록을 보여 줍니다. 이름, 같은 속성이 목록에 각 advisor 팩 버전, 버전 및 작성자를 설치 합니다. 이름은 advisor 팩의 전체 이름 및 설치 된 버전은 프로젝트에서 이미 프로 비전 된이 advisor 팩의 버전입니다. 현재 데이터베이스에 advisor 팩 프로 비전 되지, 설치 된 버전 텍스트 상자가 표시 됩니다 **설치 되지 않은**합니다. 버전 필드 advisor 팩 폴더 아래에 정렬 되는이 advisor 팩의 버전을 나타냅니다.

     

3.  목록에서 advisor 팩을 선택 합니다. Advisor 팩 구축 하지 않았습니다. 또는 advisor 팩 폴더 데이터베이스에 보다 최신 버전이 있는 경우는 **프로 비전** 단추가 활성화 됩니다. 클릭 하 고 **프로 비전** 단추입니다.

4.  프로 비전이 완료 되 면 합니다 **설치 된 버전** 필드에 선택한 advisor 팩에 새 버전 정보가 포함 되어 있습니다.

### <a name="customize-advisor-packs"></a>Advisor 팩 사용자 지정

SPA는 advisor 팩을 수정할 수 있도록 하는 개방형 아키텍처를 정의 합니다. 임계값 변경, 임계값을 공유 하 고 또는 해제 하 여 규칙 advisor 팩 파일을 수정할 수 있습니다.

변경 및 advisor 팩 구축 방법에 대 한 자세한 내용은 참조 하세요. [서버 성능 Advisor 팩 개발 가이드](server-performance-advisor-pack-development-guide.md)합니다.

### <a name="changing-thresholds"></a>임계값 변경

임계값 규칙의 트리거 조건이 충족 되는지 여부를 확인 하려면 SPA에서 사용 됩니다. 실제 고객 시나리오 매우 다양할 수 있습니다 작업 부하, 하드웨어 환경 및 비즈니스 때문에 실제 임계값 필요 합니다. 기본 임계값 SPA 기존 임계값을 수정 하는 기능을 제공 하므로 현재 사용자의 경우 적절 한 아닐 수도 있습니다.

규칙 이름을 단일 또는 side-by-side-보고서에서 클릭 하 여 임계값을 수정할 수 있습니다. 특정 advisor 팩의 모든 규칙을 관리 하려면 임계값 값을 수정 또는 **구성** 메뉴.

**임계값 값을 변경 하려면**

1.  에 **구성** 메뉴 클릭 **Advisor 팩 구성**, 를 수정할 수 있으며 클릭 한 다음에 advisor 팩의 이름을 클릭 **구성**합니다.

    **참고** advisor 팩에 포함 된 모든 규칙 목록이 표시 됩니다. Advisor 팩 이름의 왼쪽에 있는 확인란 규칙을 사용 하는 경우를 나타냅니다. 규칙을 사용 하지 않으면 모든 보고서에서 숨겨집니다.

     

2.  수정 하고자 하는 특정 규칙을 클릭 합니다. **규칙 정보** 열리고 선택한 규칙을 형성 합니다.

규칙 세부 정보 폼에는 특정 규칙에 대 한 자세한 정보가 있습니다. 이름, 설명, 상태, 가능한 결과 및 임계값을 포함 합니다. SPA는 두 가지 유형의 규칙 결과 **경고** 및 **확인**합니다. 각 유형에 권장 사항 텍스트와 권장 합니다.

임계값이 정의 하지 않은 규칙 중 일부입니다. 예를 들어는 **HTTP 연결 유지** IIS에 대 한 규칙 부울 설정을 검사 합니다. 따라서 임계값 목록은 비어 있을 수 있습니다. 그렇지 않으면 현재 규칙에 의해 사용 되는 모든 임계값이 나열 됩니다. 임계값 규칙 사용 방법에 대 한 자세한 내용은 설명의 일부로 포함 됩니다.

경우는 **규칙 정보** 양식에서 시작 되는 **구성** 메뉴 임계값은 세 개의 열: 이름, 원래 설정 및 설정 변경 합니다. 단일 또는 side-by-side-보고서에서 시작 하는 경우 보고서에서 사용 되는 임계값 값을 포함할 수는 수도 있습니다. 사용자의 값을 변경 하 여 현재 임계값을 수정할 수 있습니다 **설정을 변경** 열 및 클릭 한 다음 **저장** 데이터베이스에 변경 내용을 저장 합니다.

임계값에 대 한 변경만은 모든 변경 된 후 생성 된 보고서를 적용 합니다. 기존 보고서에는 없는 이러한 변경 내용은 영향을 받을 수 있습니다.

### <a name="sharing-thresholds"></a>임계값을 공유

이와 유사한 상황에서 서버를 관리 하는 경우에 임계값의 동일한 집합을 사용 하도록 선택할 수 있습니다. 내보내고를 사용 하 여 특정 advisor 팩에 대 한 임계값을 가져올 수 있습니다 합니다 **구성** 메뉴. 특정 관리자 팩을 선택 하 고 클릭 **구성**합니다. 내보낸된 임계값 파일이 XML 형식입니다.

임계값을 가져올 때 SPA XML 파일 형식의 유효성을 검사 하 고 파일에 선택한 advisor 팩와 일치 하는지 확인 합니다. 이 연결이 성공 하면 SPA는를 현재 프로젝트 데이터베이스에 있는 모든 값을 임계값 파일에서 가져옵니다. 이전 변경 임계값 시나리오와 마찬가지로 모든 임계값 값 변경에만 적용 나중에 생성 되는 보고서입니다. 기존 보고서 영향을 받지 않습니다.

### <a name="enable-or-disable-rules"></a>규칙을 사용 하지 않도록 설정 하거나 사용

규칙을 사용 하도록 설정 하거나에서 해제할 수는 **규칙 정보** 양식입니다. 클릭 해야 **저장** 에 변경 내용을 유지 합니다. 규칙을 사용 하지 않으면 보고서에 표시 되지 것입니다. 보고서를 생성 하는 동안 내부 비즈니스 논리 트리거되는 하지만 규칙을 다시 사용 하려는 경우 표시 되도록 보고서에서 다시 합니다.

### <a name="reset-advisor-packs-to-original-state"></a>advisor 팩 원래 상태로 다시 설정

데이터베이스에 프로 비전 된 advisor 팩을 수정할 수도 있습니다. 임계값 변경, 이외의 SQL 스크립트를 변경할 수 있습니다. 변경 보고서 메타 데이터 또는 추가 또는 제거 프로 비전 된 advisor 팩에 대 한 규칙 SPA를 지원 하지 않습니다. 이러한 영역을 수동으로 수정 하면 예기치 않은 동작이 발생할 수 있습니다.

프로 비전 된 advisor 팩을 변경 하는 방법에 대 한 자세한 내용은 참조는 [서버 성능 Advisor 팩 개발 가이드](server-performance-advisor-pack-development-guide.md)합니다.

프로 비전 된 advisor 팩에서 수행한 변경 내용을 롤백하려면 원하는 advisor 팩을 다시 설정할 수 있습니다. 이 advisor 팩에 관련 된 모든 기본 임계값 값 다시 설정 하는 모든 SQL 스크립트를 덮어씁니다. 이 모든 기존 보고서를 유지합니다.

advisor 팩을 다시 사용 하 여 수행할 수 있습니다 합니다 **Advisor 팩 구성** 폼입니다. Advisor 팩을 다시 설정 하 고 클릭을 선택 해야 **재설정**합니다.

### <a name="remove-advisor-packs"></a>advisor 팩 제거

Advisor 팩 더 이상 필요 하면 사용자가 데이터베이스에서 제거할 수 없습니다. advisor 팩 제거 advisor 팩에 대 한 모든 규칙 및 임계값, 모든 SQL 스크립트 및 모든 보고서를 포함 하 여 데이터베이스에서 제거 됩니다. 작업은 롤백할 수 있습니다.

advisor 팩 제거를 사용 하 여 수행할 수 있습니다 **Advisor 팩 구성** 폼입니다. 제거 되 고 클릭 한 다음 advisor 팩을 선택 해야 **프로 비전 해제**합니다.

### <a name="update-existing-advisor-packs"></a>기존 advisor 팩 업데이트

기존 advisor 팩 업데이트 매우 비슷합니다 advisor 팩을 원래 상태로 다시 설정 합니다. Advisor 팩 최신 버전으로 업데이트 하려면 새 advisor 팩 advisor 팩 폴더에 복사 합니다. Advisor 팩 보고서 메타 데이터 변경 사항이 없는 경우에 기존 advisor 팩에 대 한 업데이트를 간주 됩니다. 보고서 및 규칙 Id는 동일 해야 합니다. 그렇지 않은 경우 두 개의 서로 다른 advisor 팩으로 처리 해야 합니다.

비즈니스 논리 변경 및 advisor 팩 없는 보고서 메타 데이터 변경 내용을 없으면 지정 해야 새 버전 번호를 예를 들어 2.0에는 1.0에서. 없을 경우 보고서 메타 데이터 변경, advisor 팩 다른 전체 이름을 지정 되어야 합니다. 예를 들어 Microsoft.ServerPerformanceAdvisor.IIS.V1 Microsoft.ServerPerformanceAdvisor.IIS.V2를 변경할 수 없습니다.

최신 버전의 advisor 팩 있는 경우 목록 합니다 **Advisor 팩 구성** 폼을 자동으로 채웁니다 합니다 **버전** advisor 팩의 최신 버전을 사용 하 여 열. Advisor 팩을 선택 하 고 클릭 합니다 **재설정**합니다. 새 비즈니스 논리와 임계값 advisor 팩 업데이트. 이 관리자 팩에 대 한 모든 보고서는 그대로 유지 됩니다.

## <a name="managing-servers"></a>서버 관리


SPA는 대상 서버를 관리 하기 위한 기본 기능을 제공 합니다. 대상 서버 목록에 새 서버를 추가, 목록에서 서버를 제거 또는 서버에 대 한 설명 부분을 수정할 수도 있습니다.

**추가 또는 서버를 제거 하거나 서버 정보를 수정 하려면**

1.  클릭는 **구성** 메뉴를 클릭 하 여 **서버 구성**합니다.

2.  프로젝트 데이터베이스에 현재 존재 하는 서버 목록, 마지막 행이 비어 있습니다. 행을 클릭 하 고 필드에 입력 합니다. **서버 이름** 및 **파일 공유 위치** 폴더 필드는 필수 사항은 되었고 서버 이름이 고유 해야 합니다.

3.  다른 서버 정보를 입력 합니다 **묶어 표시** 각 서버에 대 한 열입니다.

    **참고** 이 필드는 설명 필드를 사용할 수 있도록 일반 텍스트 형식으로 사용 합니다. 또는를 사용 하는 서버 것을 찾을 수 있도록 쉽게 그룹 서버 또는 주 창에서 예를 들어, 위치 또는 서버 역할에서이 필드를 사용 합니다.

     

4.  많은 수의 서버를 사용 하 여 SPA를 사용 하려는 경우 SPA 가져오기에 대 한 쉼표로 구분 된 값 (.csv) 형식을 지원 합니다. 파일을 두 개 이상의 필드를 포함 해야 합니다. **서버** 하 고 **파일 공유 위치**합니다. 세 번째 필드 **묶어 표시** 는 선택 사항이 있지만 서버를 구성 하는 것이 좋습니다. 또한.csv 파일을 적절 한 형식을 결정 하거나 서버 구성을 백업에 서버 목록을 내보낼 수 있습니다.

### <a name="searching-and-filtering"></a>검색 및 필터링

여러 서버를 관리 하는 경우 SPA 신속 하 게 주 창에서 서버를 찾으려면 기본 지원을 제공 합니다. 열을 클릭 하면 서버 이름, 분석 결과, 현재 작업 상태 또는 주의 기준으로 정렬 하려면 머리글입니다. 또한 검색 기능을 사용할 수 있습니다. 주 창의 오른쪽 위 모서리에서 검색할 문자열을 입력할 수 있습니다. 합니다 **대상 서버** 목록을 주 창에서 서버를 필터링 하 고만 검색 문자열이 포함 된 필드 이름이 나 설명을 사용 하 여 서버를 표시 하려면 문자열을 사용 합니다.

다음 그림에서는 어떻게 문자열 **delL** 문자열을 사용 하 여 서버와 일치 **delL** 또는 사용 하 여 서버 **주석** 포함 하는 필드 **delL**.

![검색 및 필터링 예제](../media/server-performance-advisor/spa-user-manual-find-search-example.png)

## <a name="advanced-functionality"></a>고급 기능


### <a name="working-with-spa-windows-powershell-cmdlets"></a>SPA Windows PowerShell cmdlet 사용

SPA 콘솔은 되풀이 데이터 컬렉션에 대 한 UI 통해 지원 합니다. 해당 기능으로 사용자 환경에 충분 하지 않을 경우 고급 관리자 데이터 수집을 사용자 지정 하는 데 사용할 수 있는 Windows PowerShell cmdlet 합니다. 이러한 Windows PowerShell cmdlet를 자동으로 대상 서버에서 성능 분석을 실행 하 고 SPA를 사용 하 여 원격 고객 지원에 대 한 시스템 관리자를 사용 합니다. 예를 들어 시스템 관리자가 대상 서버의 성능 조건 주기적으로 샘플링 하려면 특정 시간 간격 내에서 SPA cmdlet을 호출 하는 스크립트를 작성할 수 있습니다.

이러한 cmdlet을 사용 하기 전에 SPAConsole.exe 응용 프로그램을 닫는 것이 좋습니다.

모든 Windows PowerShell cmdlet을 실행 하기 전에 콘솔 컴퓨터에 cmdlet을 등록 해야 합니다.

**Windows PowerShell cmdlet을 등록 하려면**

1.  관리자 권한 Windows PowerShell 명령 프롬프트에서 입력 **registerSpaCmdlets.cmd**합니다. 합니다 **SPA cmdlet을 성공적으로 등록** 메시지가 표시 됩니다.

2.  실행 **SPA PowerShell.cmd**합니다. Windows PowerShell 스크립트 파일의 경로 전달 하는 경우 해당 스크립트 자동으로 실행 합니다. 그렇지 않으면 SPA Windows PowerShell cmdlet을 실행할 준비가 되어 있는 Windows PowerShell 명령 프롬프트를 엽니다.

다음 표에서 SPA Windows PowerShell cmdlet에 설명 합니다.

| Cmdlet 이름 | 매개 변수 | 설명 |
| ------ | ------- | ------ |
| 시작 SpaAnalysis | **-ServerName** 대상 서버의 이름입니다.<br>**-AdvisorPackName** 서버에 대기 시킬 advisor 팩의 전체 이름입니다. 둘 이상의 팩 동시에 실행 되도록 예약 된 경우 매개 변수의 AP1name, AP2name로 포맷 되어야 합니다.<br>**-기간** 데이터 컬렉션에 대 한 기간입니다.<br>**-Credential** 대상 서버에서 데이터 수집을 실행 하는 계정의 사용자 자격 증명입니다.<br>**-SqlInstanceName** SQL Server 인스턴스의 이름입니다.<br>**-SqlDatabaseName** SPA 프로젝트 데이터베이스의 이름입니다. | 지정된 된 서버에서 SPA 데이터 수집 세션을 시작합니다. |
| SpaAnalysis 중지 | **-SqlInstanceName** SQL Server 인스턴스의 이름입니다.<br>**-SqlDatabaseName** SPA 프로젝트 데이터베이스의 이름입니다.<br>**-ServerName** 대상 서버의 이름입니다. | 실행 중인 SPA 세션을 중지 하려고 합니다. 세션 작업이 이미 완료, 아무 작업도 수행 하지 않고 반환 합니다. |
| Get SpaServer | **-SqlInstanceName** SQL Server 인스턴스의 이름입니다.<br>**-SqlDatabaseName** SPA 프로젝트 데이터베이스의 이름입니다. | 데이터베이스의 서버 목록을 가져옵니다. 이러한 속성을 포함 하 여 개체의 목록을 반환 합니다. 이름, 상태, 파일 공유, 및 묶어 표시 합니다. |
| Get SpaAdvisorPacks | **-SqlInstanceName** SQL Server 인스턴스의 이름<br>**-SqlDatabaseName** SPA 프로젝트 데이터베이스의 이름 | 데이터베이스에 advisor 팩 목록을 가져옵니다. 이러한 속성을 포함 하 여 개체의 목록을 반환 합니다. 이름, DisplayName, 만든이 및 버전입니다. |

Windows PowerShell 자동화 시나리오를 사용 하는 암호화 된 파일을 통해 자격 증명을 전달 하는 기능을 제공 합니다. 암호화 된 파일을 사용 하 여 cmdlet에 자격 증명을 전달 하는 방법에 대 한 자세한 내용은 참조 하세요. [Windows PowerShell 스크립트는 수락 자격 증명 만들기](https://technet.microsoft.com/magazine/ff714574.aspx)합니다.

### <a name="automating-spa-report-collection-by-using-windows-powershell"></a>Windows PowerShell을 사용 하 여 SPA 보고서 컬렉션을 자동화

다음 절차는 SPA Windows PowerShell cmdlet을 사용 하 여 SPA 보고서 컬렉션을 자동화 하는 방법에 대 한 예를 나타냅니다.

사용자 자격 증명을 암호화 및 Windows PowerShell을 통해 캐시 될 수 있습니다. 이러한 자격 증명은 원격 서버에 로그온 하는 데 사용 됩니다. SPA에 국한 되지 않고, 하지만 다음 예제에서는이 기술을 보여 줍니다.

``` syntax
$fileName = 'D:\temp\operator.txt'
$userName = 'domainname\operator'
 
# save credential to file
$(Get-Credential).Password | convertFrom-SecureString | Set-Content $fileName
 
# load credential from file
$credential = New-Object System.Management.Automation.PsCredential $userName, $(Get-Content $fileName | convertTo-SecureString)
 
# run command
.\start-SpaAnalysis  ServerName: Server1  Credential: $credential  AdvisorPackName:Microsoft.ServerPerformanceAdvisor.CoreOS.V1 10  Duration:10  SqlInstanceName: .\SQLExpress  SqlDatabaseName:SPA8294
```

이 파일을 실행 하기 전에 실행 해야 **집합 executionpolicy remoteSigned**

다음 명령을 사용 하 여 배치 파일에서 실행할 수 있습니다.

``` syntax
PowerShell -command "& '.\RunSpa.ps1' "
```

### <a name="use-t-sql-to-generate-reports"></a>T-SQL을 사용 하 여 보고서를 생성 하려면

하지는 SPAConsole.exe에 제공 되는 사용자 지정 보고서 작성을 위해 SQL을 사용 하 여 SPA 보고서 데이터를 추출할 수 있습니다.

예를 들어, 다음 T-SQL 명령을 지난 3 일간 다루는 시간 프레임에 대 한 서버 CPU 별 상위 10 개 목록을 제공 합니다.

``` syntax
select TOP 10
   MachineName,
   AverageCpu
FROM (
   select
      __MachineName MachineName,
      AVG(AverageValue) AverageCpu
   FROM [SPA].[Microsoft.ServerPerformanceAdvisor.CoreOS.V1].vwCpuPerformance
   WHERE __Creationtime > dateadd(DAY, -3, GETUTcdate())
      AND Name = N'% Processor time' AND CpuId = N'_Total'
   GROUP BY __MachineName
) t
OrdER BY t.AverageCpu DESC 
```

### <a name="working-with-multiple-projects"></a>여러 프로젝트 작업

SPA에서 사용 되는 SQL Server 데이터베이스를 분할 하는 경우도 있습니다. 그러면 서버를 논리적으로 분할 하는 데 도움이 또는 SQL Server 데이터베이스의 데이터 크기를 줄일 수 있습니다. 이러한 경우 SPA 콘솔 여러 프로젝트를 지원합니다. 클릭 하 여 새 프로젝트 데이터베이스를 만들 수 있습니다 **파일**, 를 클릭 한 다음 **새 프로젝트**합니다. 처음으로 새 프로젝트 데이터베이스를 만드는 데 사용 하 여 마법사가 나타납니다.

프로젝트를 만든 후 클릭 **파일**, 를 클릭 하 고 **프로젝트 열기** 프로젝트 간에 전환 하려면. SPA 콘솔 뛰어난 성능 분석은 현재 열려 있는 프로젝트 내에서 실행 중인 경우 데이터베이스를 전환 하는 것을 허용 하지 않습니다. 이 성능 데이터의 무결성을 보호 하는 것입니다.

새 프로젝트 데이터베이스를 만들거나 데이터베이스를 다른 프로젝트 열기를 선택 하면 현재 프로젝트가 닫힙니다. 현재 프로젝트를 닫을 때 모든 보고서 열기 닫힙니다.

**참고** SQL Server 2008 R2 Express는 10GB 데이터베이스 제한 합니다. 여러 프로젝트를 사용 하 여 하나 이상의 SQL Server 데이터베이스를 사용할 수 있으며 10GB SQL Server 2008 R2 Express 제한 미만으로 유지 키를 누릅니다.

 

### <a name="logging-and-debugging"></a>로깅 및 디버깅

SPA 기본 로깅 기능을 제공합니다. 로그 SPAConsole.exe와 같은 폴더에 있는 로그 파일에 쓸 수를 허용 합니다. SPA 콘솔을 실행 하는 사용자 계정이 SPA 로그는 로그 파일에 쓸 수 있는지 확인 하려면 설치 된 폴더에 대 한 쓰기 권한이 있어야 합니다.

SPA는 다음과 같은 유효한 로그 수준을 포함 되어 있습니다.

* **정보 제공 용 이므로** SPA 콘솔 걸리고 디버깅을 위해 주로 용인지 여부를 지정 하는 모든 동작에 대 한 로그를 덤프 합니다.

* **경고** 모든 실패와 SPA 콘솔 내에서 발생 하는 예외를 기록 합니다. 오류 중 일부는 단순히 SPA 콘솔에서 처리 될 수 있는 유효성 검사 오류입니다.

* **중요 한** 오류 및 SPA 콘솔에서 처리할 수 없는 예외를 기록 합니다. 이러한 오류는 SPA 콘솔에 충돌이 발생합니다. 로그에서 이러한 오류에 대 한 컨텍스트 정보를 제공합니다.

기본적으로 즉, 실패 및 예외 SPA에서 발생 하는 SPA만 로그는 로그 수준을 경고 됩니다. 편집 하 여 로그 수준을 변경할 수 있습니다는 **SpaConsole.exe.config** SpaConsole.exe가 있는 동일한 폴더에 파일입니다. 모든 로그는 같은 폴더에서 log.txt 파일에 기록 됩니다.

SPA는 또한 디버깅을 위한 몇 가지 기본 기능을 제공합니다. SPA에 대 한 디버깅을 설정 하려면 사용자는 SPA 프로젝트 데이터베이스를 수동으로 수정 해야 합니다. 설정은 구성 테이블에 저장 됩니다. 사용자는 SPA 프로젝트 디버그 모드를 변경 하려면 다음 SQL 스크립트를 실행 해야 합니다.

``` syntax
UPdate [Configurations] SET Value = N'true' WHERE Name = N'Debugmode'.
```

SPA 프레임 워크는 디버그 모드에서 advisor 팩에는 문제를 해결할 수 있으므로 성능 분석 하는 동안 생성 되는 임시 데이터를 유지 합니다. 이 스크립트는 advisor 팩 개발자가 사용할 주로 됩니다.

SPA에서 디버깅 기능에 대 한 자세한 내용은 참조는 [서버 성능 Advisor 팩 개발 가이드](server-performance-advisor-pack-development-guide.md)합니다.

### <a name="managing-the-database"></a>데이터베이스 관리

### <a name="backup-and-restore-the-database"></a>데이터베이스 백업 및 복원

SPA 콘솔을 백업 하 고 SPA 데이터베이스를 복원 하는 기능을 제공 하지 않습니다. 표준 Microsoft SQL Server 도구 및 스크립트를 사용 하 여 데이터베이스 백업 및 복원 해야 합니다.

### <a name="clean-up-the-database"></a>데이터베이스 정리

더 많은 성능 분석을 실행 하는 SPA 프로젝트 데이터베이스의 크기가 증가할 수 있습니다. SPA는 기본적으로 모든 보고서를 유지 합니다. 성능을 개선 하기 위해 오래 된 보고서를 제거 해야 할 수 있습니다. 통해 보고서를 삭제할 수는 **보고서 탐색기** 인터페이스입니다.

## <a name="privacy-and-security"></a>개인 정보 보호 및 보안


SPA는 SPA 콘솔에 대상 서버에서 데이터를 수집 하는 것을 지원합니다. Microsoft 또는 타사 개발자가 모든 정보를 보내도록 설계 되지 않았습니다. SPA 개인 정보 취급 방침에 대 한 자세한 내용은 Microsoft 소프트웨어 사용 조건에 대 한 참조 Server Performance Advisor입니다.

SPA에서 수집 되는 모든 데이터는 프로젝트 데이터베이스에 저장 됩니다. SPA에서는 ETW 추적의 일부 이기 때문에 높은 비즈니스 중요도 포함할 수 있는 중요 한 정보를 수집 합니다. SPA 프로젝트 데이터베이스에 대 한 액세스를 공유와 관련 된 잠재적인 위험을 알아야 합니다. 각 대상 컴퓨터에 지정 된 공유 폴더에서 임시 로그 파일이 저장 됩니다. SPA 시도 하는 경우에 해당 임시 로그를 삭제 하려면 파일 데이터 가져오기가 완료 되 면, 해당 로그 파일을 삭제할 수는 항상 보장이 합니다. 보안 위치에 공유 폴더에 있는지 확인 해야 합니다.

SPA advisor 팩 구문 분석 하 고 성능 보고서를 생성 하는 성능 로그를 분석 하는 SQL 스크립트를 포함 합니다. SPA 이러한 스크립트를 실행 하면 권한 제한 하려고 시도 합니다. 그러나이 여전히 있는지 스크립트는 대상 서버에서 SPA 통해 중요 한 정보를 수집 또는 가져오거나 수 같은 SPA 프로젝트 데이터베이스에 저장 된 중요 한 정보를 수정 합니다. SPA 프로젝트 데이터베이스에 프로 비전 되는 모든 advisor 팩 출처를 신뢰할 수 있는지 확인 해야 합니다.

## <a name="errors-and-troubleshooting"></a>오류 및 문제 해결


### <a name="spaconsoleexe-does-not-start-or-write-log-file"></a>SPAConsole.exe 시작 되지 않거나 로그 파일 쓰기

.NET Framework 설치 되어 있지 않으면 SPAConsole.exe 처음으로 실행 하려고 할 때 응용 프로그램을 시작 하거나 로그 파일을 기록 합니다. 확인 compatible.NET Framework가 설치 되어 있고 작동 제대로 SPA를 시작 하기 전에 합니다.

### <a name="locating-log-information"></a>로그 정보 찾기

SPA는 SPA 폴더 아래에 있는 log.txt 파일에서 오류 정보를 저장합니다. 자세한 오류 메시지 및 호출 스택 정보는이 폴더에 기록 됩니다. 자세한 정보를 해석 하는 오류를 발생 하는 경우 오류 세부 정보를 보려면 log.txt 파일을 열 수 있습니다.

### <a name="database-size-limitations-for-sql-server-express"></a>SQL Server Express에 대 한 데이터베이스 크기 제한

SQL Server Express에 사용자 데이터베이스에 대해 10GB의 크기 제한 됩니다. 이 크기의 데이터베이스에 20, 000-30, 000 보고서를 저장할 수 있는 용량이 있습니다. 이 데이터베이스 제한에 도달한의 가능성을 줄이기 위해 정기적으로 보고서를 삭제 및/또는 10GB 사용자 데이터베이스 제한 되지 않은 SQL Server의 다른 버전을 사용 하는 것이 좋습니다.

### <a name="sql-server-express-log-size-and-disk-capacity"></a>SQL Server Express 로그 크기와 디스크 용량

SQL Server Express를 사용 하는 경우 사용자 데이터베이스는 10GB로 제한 되지만 해당 로그 파일 70GB를 초과할 수 있습니다. 이러한 이유로, 100GB 이상의 사용 가능한 디스크 공간에 대해 권장 SQL Server Express. 이 디스크 공간은 약 20, 000 30, 000 보고서를 저장할 충분 해야 합니다. 이 로그 파일 이름은 spadb\_log.ldf, 하며에서 찾이 됩니다 **% Program Files %\\Microsoft SQL Server\\MSSQL10. SQLEXPRESS\\MSSQL\\데이터**입니다.

### <a name="failure-to-connect-to-target-server"></a>대상 서버에 연결 실패

대상 서버에서 성능 분석을 실행할 때 SPA 콘솔을 실행 하는 사용자 계정 대상 서버에서 PLA로 설정 하는 데이터 수집기를 큐에 특정 권한을 보유 해야 합니다. Windows 방화벽 설정도 통과 하도록 PLA 통신을 허용 하도록 변경 해야 합니다. 자세한 구성 지침은 [SPA 설정](#bkmk-setupspa)합니다.

### <a name="failure-to-create-pla-data-collection-set-on-the-target-server"></a>대상 서버에서 PLA 데이터 컬렉션 집합 만들기 실패

표시 되 면을 대상 서버 메시지에 PLA 데이터 컬렉션 집합을 만들 수 없습니다, 다음을 수행 해야 합니다.

* 확인 된 **성능 로그 및 경고** 서비스가 실행 되 고

* 보안 설정 **네트워크 액세스: 암호 및 네트워크 인증에 대 한 자격 증명의 저장소를 허용 하지 않는** 을 사용할 수 없습니다. SPA를 대상 서버에서 데이터 컬렉션 집합을 만드는 사용자 자격 증명을 사용 해야 하기 때문에 보안 설정을 비활성화 해야 합니다.

### <a href="" id="running-spa-against-the-console-"></a>SPA 콘솔 실행

PLA 대상 서버 SPA 콘솔과 동일한 경우 다른 채널을 통해 전달 됩니다. 사용자 계정 관리자 권한으로 SPA 콘솔을 실행 중인 경우에 PLA 실패 합니다. SPA 콘솔은 대상 서버에 설치 하는 경우 사용자는 SPA 성능 분석 작업은 콘솔에서 실행할 수 있도록 관리자 권한으로 실행 해야 합니다.

### <a name="running-multiple-consoles-at-the-same-time"></a>동시에 여러 콘솔을 실행합니다.

SPA에서 동시에 동일한 SPA 프로젝트 데이터베이스에 대해 실행 하는 여러 콘솔을 지원 하지 않습니다. 또한 SPA는를 방지 하는 잠금 및 동기화 메커니즘을 제공 하지 않습니다. 두 개의 SPA 콘솔 동시에 실행 중인 경우에 이러한 SPA 콘솔을 실행 하는 시간 순서에 따라 콘솔 일관성 없이 작동 합니다. 분석을 시작 하는 콘솔에서 처리 되기 전에 모든 대기 중인된 성능 분석 세션이를 방지 하려면 목록에서 제거 해야 합니다.

SPA는 SPA에서 성공적으로 생성 되는 각 보고서의 무결성을 보호 합니다. 동시에 SPA 보장 하지 않습니다 모든 큐에 대기 중인된 분석 작업을 완료 됩니다. 일치 하지 않는 표시 되는 경우 성능 분석 세션에 대 한 상태 변경 또는 성능 로그 데이터 수집기에 의해 생성 되는 설정, 동일한 SPA 프로젝트 데이터베이스에 대해 실행 되는 여러 SPA 콘솔 인스턴스 원인일 가능성이 높은 시스템을 주장 하는 오류를 찾을 수 없습니다.

SPA Windows PowerShell cmdlet을 실행 동일한 SPA 데이터베이스에 대해 실행 되는 SPA 콘솔로 영향을도 있습니다. SPA Windows PowerShell cmdlet을 실행 하기 전에 SPA 콘솔을 닫는 것이 좋습니다.

### <a name="spaconsoleexe-recurring-collection-is-disrupted"></a>중단 된 SPAConsole.exe 되풀이 컬렉션

SPAConsole.exe를 실행 하 고 되풀이 데이터 컬렉션 (예를 들어 매시간 컬렉션)을 사용 하는 경우는 SPAConsole.exe를 실행 하는 서버 하지 절전 모드에 않도록 주의 해야 일시 중단할 수 있습니다. SPA 절전 정책에 대 한 확인 하지 않습니다. 이 일시 중단 된 활동에는 정기적으로 되풀이 데이터 수집을 방해가 될 수 있습니다.

### <a name="lost-etw-events"></a>손실 된 ETW 이벤트

대상 서버의 최소 성능에 미치는 영향을 만들려면 PLA는 성능 정보를 수집 하는 동안 낮은 우선 순위로 실행 하도록 설계 되었습니다. 대상 서버를 사용 중인 경우 PLA 대상 서버에서 실행 되는 우선 순위가 높은 작업에 양보 하는 데이터 수집 작업 중 일부를 삭제할 수 있습니다. 여기서 이벤트 기록 디스크에는 워크 로드 I/O 또는 SSD가 등의 더 빠른 드라이브를 사용 하 여 만들어지고 t 충돌 하는 공유 폴더를 설정을 해야 합니다. 이벤트를 삭제 하는 경우 보고 됩니다 보고서 뷰에서 손실된 이벤트는 생성 된 성능 메트릭의 안정성 영향을 줄 수 있으므로.

특정 사용 권한 문제는 레지스트리 나 WMI 쿼리를 건너뛸 수에 발생할 수 있습니다. 그러나이 ETW 이벤트 손실 보다 발생할 가능성이 크게 줄어듭니다. 결과적으로, 데이터 수집기 집합 결과 경우가 없는 요청 된 모든 값입니다. 상황을 모든 advisor 팩에 대 한 T-SQL 스크립트에 의해 처리 되므로 있는지 확인 해야 합니다. 데이터 컬렉션 결과 데이터에 존재 하지 않는 경우에 보고서에 데이터가 없는로 표시 됩니다.

ETW 이벤트 손실 PLA 일반적 이기 때문에 생성 되는 데이터 요소에 따라 ETW 추적 하지 기준이 될 수 있습니다 생성 되는 데이터 요소와 일치, 예를 들어 성능 카운터입니다. 예를 들어, IIS의 총 CPU 사용량이 80% (수 있는 성능 카운터에서), 고가 맨 위에 Url 사용 (이 ETW 추적에서 제공 되는 데이터 요소) 모든 CPU 시간의 10%를 볼 수입니다. 일반적으로 데이터 요소의 도구 설명 통해 하나 이상의 데이터 요소에 대 한 데이터 소스를 볼 수 있습니다. 이러한 데이터의 손실의 영향을 알아야 합니다.

이러한 이벤트의 손실을 막으려면 결과 폴더 대상 서버를 닫아야 합니다.

ETW 추적 손실 이외의 불완전 한 데이터를 포함 하는 데이터 수집기 결과 advisor 팩 개발자는 ETW 이벤트 손실 알림에 대 한 지원을 추가 했습니다 하 고 하는 경우 알림 표시줄에 대 한 사용자에 게 단일 보고서 맨 위에 표시 됩니다는 잠재적으로 일치 하지 않는 보고서 데이터 손실을 야기 합니다. 자세한 데이터 손실 정보 log.txt 파일에서 찾을 수 있습니다.

## <a name="glossary"></a>용어 설명


다음은 일부의 SPA를 사용한 용어입니다.

* **Advisor 팩** 메타 데이터와 대상 서버에서 수집 된 성능 로그를 처리 하는 T-SQL 스크립트의 컬렉션입니다. Advisor 팩 성능 로그 데이터에서 보고서를 생성합니다. Advisor 팩에 있는 메타 데이터는 성능 측정에 대 한 대상 서버에서 수집할 데이터를 정의 합니다. 또한 메타 데이터의 규칙과 임계값, 보고서 형식 집합을 정의합니다. 대부분의 경우 advisor 팩은 특별히 작성 된 예를 들어, 인터넷 정보 서비스 (IIS)는 단일 서버 역할을 합니다.

* **SPA 콘솔** SPA의 중앙 구성 요소인 SpaConsole.exe 합니다. SPA를 테스트 하는 대상 서버에서 실행할 필요는 없습니다. SPA 콘솔에서 보고서 보기 및 분석을 실행 하려면 프로젝트 설정 SPA를 모든 사용자 인터페이스를 포함 합니다. 기본적으로 SPA는 2 계층 응용 프로그램을 사용 합니다. SPA 콘솔 UI 계층 및 비즈니스 논리 계층의 일부를 포함합니다. SPA 콘솔을 예약 하 고 성능 분석 요청을 처리 합니다.

* **SPA 프레임 워크** 모든 사용자 인터페이스, 로그 처리 성능, 구성, 오류 처리 및 Api, 데이터베이스 및 관리 절차를 제공 합니다.

* **SPA 프로젝트** advisor 팩에 대 한 대상 서버에서 생성 된 대상 서버, advisor 팩 및 성능 분석에 대 한 모든 정보를 포함 하는 데이터베이스를 보고 합니다. 비교 하 고 동일한 SPA 프로젝트 내에서 기록 및 추세 차트를 볼 수 있습니다. 둘 이상의 프로젝트를 만들 수 있습니다. SPA 프로젝트를 서로 독립적 이며 프로젝트에서 공유 되는 데이터가 없습니다.

* **대상 서버** 물리적 컴퓨터 또는 IIS와 같은 특정 서버 역할을 갖는 Windows Server를 실행 하는 가상 컴퓨터.

* **데이터 분석 세션** 특정 대상 서버에 대 한 성능 분석 합니다. 데이터 분석 세션 advisor 팩을 여러 개 포함할 수 있습니다. 이러한 advisor 팩에서 데이터 수집기 집합은 단일 데이터 수집기 집합으로 병합 됩니다. 단일 데이터 분석 세션에 대 한 모든 성능 로그는 동일한 시간 동안 수집 됩니다. 동일한 데이터 분석 세션에서 실행 되는 advisor 팩에 의해 생성 된 보고서를 분석 사용자가 전체 성능 상황을 이해 하 고 성능 문제에 대 한 근본 원인을 식별 하는 데 도움이 됩니다.

* **Windows 용 이벤트 추적** Windows에서 제공 하는 고성능, 오버 헤드가 낮은, 확장 가능한 추적 시스템. 프로 파일링 및 디버깅 다양 한 시나리오의 문제를 해결 하는 데 사용할 수 있는 기능을 제공 합니다. SPA 성능 보고서를 생성 하기 위한 데이터 원본으로 ETW 이벤트를 사용 합니다. ETW에 대 한 일반 정보를 참조 하십시오. [디버깅 및 ETW를 사용한 성능 조정 개선](https://msdn.microsoft.com/magazine/cc163437.aspx)합니다.

* **Windows Management Instrumentation (WMI)** 관리 데이터와 Windows의 작업에 대 한 인프라입니다. WMI 스크립트 또는 원격 컴퓨터에서 관리 작업을 자동화 하는 응용 프로그램을 작성할 수 있습니다. 또한 WMI는 운영 체제의 다른 부분에 및 제품 관리 데이터를 제공합니다. SPA 성능 보고서 생성에 소스로 WMI 클래스 정보 및 데이터 요소를 사용합니다.

* **성능 카운터** 얼마나 잘 운영 체제 또는 응용 프로그램, 서비스 또는 드라이버는 수행 하는 방법에 대 한 정보를 제공 하는 데 사용 합니다. 성능 카운터 데이터는 시스템 병목 현상을 확인 하 고 시스템 및 응용 프로그램 성능을 세부적으로 조정할 수 있습니다. 운영 체제, 네트워크 및 장치에 응용 프로그램에서 시스템 얼마나 잘 수행의 한 그래픽 뷰를 제공 하기 위해 사용할 수 있는 카운터 데이터를 제공 합니다. SPA를 사용 하 여 성능 카운터 정보 및 데이터 요소 원본으로 성능 보고서를 생성 합니다.

* **성능 로그 및 경고 (PLA)** 수집 성능 로그 및 추적 및 특정 트리거가 충족 될 때 성능 경고를 발생 시킵니다. 성능 카운터, 이벤트를 ETW (Windows), WMI 쿼리, 레지스트리 키 및 구성에 대 한 파일 추적을 수집 하도록 PLA는 사용할 수 있습니다. 또한 PLA 원격 프로시저 호출 (RPC)을 통해 원격 데이터 수집을 지원합니다. 사용자는 데이터를 수집, 데이터 컬렉션 빈도, 데이터 컬렉션 기간, 필터, 결과 파일을 저장할 위치에 대 한 정보를 포함 하는 데이터 수집기 집합을 정의 합니다. SPA PLA를 사용 하 여 대상 서버에서 모든 성능 데이터를 수집 합니다.

* **보고서를 단일** A SPA 보고서 생성 되는 단일 대상 서버에 하나의 advisor 팩에 대 한 데이터 분석 세션 기반으로 합니다. 알림 및 다양 한 데이터 섹션을 포함할 수 있습니다.

* **Side-by-side-보고서** 동일한 advisor 팩에 대 한 두 개의 단일 보고서를 비교 하는 SPA 보고서입니다. 동일한 대상 서버에 별도 성능 분석 실행 또는 다른 대상 서버에서 두 개의 보고서를 생성할 수 있습니다. Side-by-side-보고서 비정상적인 동작이 나 보고서 중 하나에서 설정을 식별할 수 있도록 하는 두 개의 보고서를 비교 하는 기능을 만듭니다. 알림 및 다양 한 데이터 섹션 side-by-side-보고서에 포함 되어 있습니다. 각 섹션에서 두 보고서 데이터를에서 나열된 하 여 함께 합니다.

* **추세 차트** 반복적인 패턴이 성능 문제를 조사 하는 데 사용 되는 SPA 보고서입니다. 매주 또는 매일 발생할 수 있는 클라이언트 컴퓨터 또는 서버에서 예약 된 서버 부하 변경 많은 반복적인 성능 문제 발생 됩니다. SPA는 24 시간 추세 차트 및 이러한 문제를 식별 하는 7 일 추세 차트를 제공 합니다.

    사용자와 같은 단일 보고서 내에서 숫자 값은 한 번에 하나 이상의 데이터 계열을 선택할 수 **평균 총 CPU 사용량**합니다. 구체적으로 말하면, 숫자 값에는에서 주어진된 된 시간 인스턴스 단일 AP에서 생성 되는 단일 서버에서 스칼라 값이입니다. SPA (각 요일에 대 한 일 보고서의 경우 7)은 하루 중 각 시간에 대해 하나씩 24 그룹으로 해당 값을 그룹화합니다. SPA 평균, 최소값, 최대값 및 각 그룹에 대 한 표준 편차를 계산합니다.

* **기록 차트** 시간이 지남에 따라 팩 쌍 지정 된 서버 및 관리자에 대 한 단일 보고서 내 값 변경 내용에 특정 숫자 표시 하는 데 사용 되는 SPA 보고서입니다. 사용자는 여러 데이터 계열을 선택 하 고 다른 데이터 계열 간의 상관 관계를 이해 하는 기록 차트에 함께 표시할 수 있습니다.

* **데이터 계열** 시간 동안 동일한 데이터 소스에서 수집 되는 숫자 데이터입니다. 동일한 소스에서 데이터에는 하나의 서버에서 IIS에 대 한 평균 요청 큐 길이 같은 동일한 대상 서버에서 온 것으로 의미 합니다.

* **규칙** 논리, 임계값 및 설명의 조합입니다. 잠재적인 성능 문제를 나타냅니다. 각 advisor 팩 규칙을 여러 개 포함 되어 있습니다. 각 규칙은 보고서 생성 프로세스에 의해 트리거됩니다. 규칙에 단일 보고서의 데이터에는 논리 및 임계값이 적용 됩니다. 조건에 해당 하는 경우에 경고 알림이 발생 합니다. 알림을로 설정 된 그렇지 않은 경우는 **확인** 상태입니다. 해당 사항 없음로 알림이 설정 되어 규칙이 적용 되지 않는 경우 (**NA**) 상태입니다.

* **알림** 규칙을 사용자에 게 표시 하는 정보입니다. 규칙의 상태를 포함 (**확인**, **NA**, 또는 **경고**), 이름, 규칙 및 성능 문제를 해결 하기 위해 가능한 권장 사항입니다.
