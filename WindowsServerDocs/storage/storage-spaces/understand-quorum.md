---
title: 클러스터 및 풀 쿼럼을 이해
description: 복잡성을 특정 예제를 사용 하 여 클러스터 및 풀 쿼럼이 있는 경우를 이해 합니다.
keywords: 쿼럼 감시, S2D를 클러스터 쿼럼이 있는 경우 풀 쿼럼 풀 클러스터 저장소 공간 다이렉트
ms.prod: windows-server-threshold
ms.author: adagashe
ms.manager: eldenc
ms.technology: storage-spaces
ms.topic: article
author: adagashe
ms.date: 01/18/2019
ms.localizationpriority: medium
ms.openlocfilehash: 66d4796a6ffb453f6edb5fed20dba29b70f7ec4b
ms.sourcegitcommit: ed27ddbe316d543b7865bc10590b238290a2a1ad
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/09/2019
ms.locfileid: "65476111"
---
# <a name="understanding-cluster-and-pool-quorum"></a>클러스터 및 풀 쿼럼을 이해

>적용 대상: Windows Server 2019, Windows Server 2016

[Windows Server 장애 조치 클러스터링](../../failover-clustering/failover-clustering-overview.md) 워크 로드에 대 한 고가용성을 제공 합니다. 이러한 리소스; 노드가 리소스를 호스트 하는 경우 항상 사용 가능한 것으로 간주 됩니다. 그러나 클러스터 일반적으로 필요한 실행 중 절반 이상 노드의 것 이라고 *쿼럼*합니다.

쿼럼 하지 않도록 설계 되었습니다 *스플릿 브레인* 시나리오는 네트워크에는 파티션 및 노드의 하위 집합을 서로 통신할 수 없는 경우 발생할 수 있습니다. 이 작업을 소유 하 고 다양 한 문제를 야기할 수 있는 동일한 디스크에 기록 하려고 노드의 두 하위 집합을 발생할 수 있습니다. 그러나이 값은 이러한 그룹 중 하나에만 온라인 유지 됩니다 있도록 실행을 계속 노드의 이러한 그룹 중 하나에 강제 하는 쿼럼의 장애 조치 클러스터링의 개념을 사용 하 여 방지 됩니다.

쿼럼은 클러스터는 여전히 온라인 상태를 유지 하는 동안 유지할 수 있는 오류 수를 결정 합니다. 쿼럼 여러 서버에 동시에 리소스 그룹을 호스트 하 고 동시에 동일한 디스크에 작성 하지 마십시오 있도록 클러스터 노드의 하위 집합 간의 통신에 문제가 있는 경우 시나리오를 처리 하도록 설계 되었습니다. 이 개념이 쿼럼 함으로써 클러스터는 클러스터 서비스를 하나의 특정 리소스 그룹의 소유자 인지 확인 하는 노드 하위 집합 중 하나에서 중지를 강제로 됩니다. 중지 된 노드는 노드의 기본 그룹을 사용 하 여 다시 한 번 통신할 수 있습니다, 되 면 자동으로 클러스터에 다시 조인할를 클러스터 서비스를 시작 합니다.

Windows Server 2019 및 Windows Server 2016에는 자체 쿼럼 메커니즘에 있는 시스템의 두 구성 요소

- <strong>클러스터 쿼럼</strong>: 이 클러스터 수준에서 작동 합니다 (예: 노드를 손실 하 고 수 유지 클러스터)
- <strong>풀 쿼럼을</strong>: 저장소 공간 다이렉트가 사용 하는 경우 풀 수준에서 작동 하는이 (즉, 노드 및 드라이브를 손실 하 고 수 유지 풀). 저장소 풀 이기 때문에 여러 다른 쿼럼 메커니즘을 갖게 클러스터형 및 비클러스터형 시나리오에서 사용할 설계 되었습니다.

## <a name="cluster-quorum-overview"></a>클러스터 쿼럼 개요

아래 표에 시나리오에 따라 클러스터 쿼럼 결과 개요를 제공합니다.

| 서버 노드 | 하나의 서버 노드 오류에서 존속 수 있습니다. | 하나의 서버 노드 실패 후 다른 감당할 수 있습니다. | 두 개의 동시 서버 노드 장애를 견딜 수 있습니다. |
|--------------|-------------------------------------|---------------------------------------------------|----------------------------------------------------|
| 2            | 50/50                               | 아니요                                                | 아니오                                                 |
| 2 + 미러링 모니터 서버  | 예                                 | 아니오                                                | 아니요                                                 |
| 3            | 예                                 | 50/50                                             | 아니오                                                 |
| 3 + 미러링 모니터 서버  | 예                                 | 예                                               | 아니요                                                 |
| 4            | 예                                 | 예                                               | 50/50                                              |
| 4 + 미러링 모니터 서버  | 예                                 | 예                                               | 예                                                |
| 5 이상  | 예                                 | 예                                               | 예                                                |

### <a name="cluster-quorum-recommendations"></a>클러스터 쿼럼 권장 사항

- 미러링 모니터는 두 개의 노드가 있으면 <strong>필요한</strong>합니다.
- 미러링 모니터 서버는 3-4 노드에 있으면 <strong>좋습니다</strong>합니다.
- 인터넷에 액세스할 수 있으면 사용 하는  <strong>[클라우드 미러링 모니터 서버](../../failover-clustering/deploy-cloud-witness.md)</strong>
- 파일 공유 감시를 사용 하 여 다른 컴퓨터 및 파일 공유를 사용 하 여 IT 환경의 경우

## <a name="how-cluster-quorum-works"></a>클러스터 쿼럼의 작동 원리

활성 노드를 구성 있는지 확인 해야 노드가 실패 하는 경우, 일부 노드의 다른 하위 집합을 사용 하 여 연락처를 잃을 때를 *대부분* 의 클러스터를 온라인 상태로 유지 합니다. 이러한를 확인할 수 없는 하는 경우 오프 라인 상태가 됩니다.

하지만 개념이 *대부분* 에 완전히 총 노드 클러스터의 경우 (예: 5 노드 클러스터에 노드가 3 개) 홀수입니다. 따라서 무엇 (예: 4 개 노드 클러스터) 노드 수가 짝수인 클러스터에 대 한?

두 가지 방법으로 클러스터 가능 합니다 *응답의 총* 홀수:

1. 이동할 수는 먼저 *위로* 추가 하 여를 *미러링 모니터 서버* 는 추가 응답을 사용 하 여 합니다. 그러려면 사용자 설정 해야 합니다.
2.  또는 이동할 수 있는 *다운* 하나 운 노드의 투표 (필요에 따라 자동으로 수행) 비우는 중에서 하나입니다.

노드를 성공적으로 극복 될 때마다 확인 합니다 *대부분*를 정의 *대부분* 는 남은 개체 간에 되도록 업데이트 됩니다. 이렇게 하면 한 노드에서 다른 차례로 다른 손실 등 클러스터 수 있습니다. 이 개념이 합니다 *응답의 총* 이라고 연속 실패 후 조정  <strong>*동적 쿼럼*</strong>합니다.  

### <a name="dynamic-witness"></a>동적 미러링 모니터 서버

동적 감시 응답 하도록 미러링 모니터의 설정/해제 합니다 *응답의 총* 홀수입니다. 투표 수가 홀수인 경우 미러링 모니터 서버 응답이 없습니다. 투표 수가 짝수인 경우 미러링 모니터 서버에 응답이 있습니다. 동적 미러링 모니터 서버가 미러링 모니터 서버 오류로 인해 클러스터 작동이 위험을 크게 줄여줍니다. 클러스터를 클러스터에서 사용할 수 있는 투표 노드의 수에 따라 감시 응답을 사용할지 여부를 결정 합니다.

동적 쿼럼 아래에 설명 된 방식으로 동적 미러링 모니터를 사용 하 여 작동 합니다.

### <a name="dynamic-quorum-behavior"></a>동적 쿼럼 동작

- 있는 경우는 <strong>도</strong> 노드 및 미러링 모니터 서버가 없음을 수가 *하나의 노드 0이 응답을 가져옵니다*합니다. 예를 들어 4 개의 노드 중 세 개만 가져오기 응답, 하므로 *응답의 총* 3 이며 응답으로 두 명의 남은 개체는 대부분 것으로 간주 됩니다.
- 있는 경우는 <strong>홀수</strong> 노드 및 미러링 모니터 서버가 없음을 수가 *투표를 얻는*합니다.
- 있는 경우는 <strong>도</strong> 노드 및 미러링 모니터 서버 수가 *미러링 모니터 서버 응답*이므로 총 크기가 홀수입니다.
- 있는 경우는 <strong>홀수</strong> 노드 및 미러링 모니터 서버 수가 *미러링 모니터 서버가 응답 하지 않습니다*합니다.

동적 쿼럼 투표를 동적으로 투표 수의 과반수 손실 되지 않도록 하 고 허용 (마지막 man 고정 라고도 함) 노드 하나를 사용 하 여 실행 하는 클러스터 노드에 할당할 수가 있습니다. 예를 들어 4 개 노드 클러스터를 살펴보겠습니다. 쿼럼 필요 3 투표를 가정 합니다. 

이 경우 클러스터는 다운 되었을 두 노드를 손실 하는 경우.

![보여 주는 네 개의 클러스터 노드를 각각 가져옵니다 투표 다이어그램](media/understand-quorum/dynamic-quorum-base.png)

그러나 동적 쿼럼 방지이 상황이 발생 합니다. *응답의 총* 쿼럼에 사용할 수 있는 노드의 수에 따라 결정 이제 됩니다 필요 합니다. 동적 쿼럼을 사용 하 여 클러스터에 3 개의 노드가 손실 된 경우에 등록 유지 됩니다 따라서.

![노드 실패 시간과 각 오류 후 조정 필요 투표 수가 하나씩 있는 클러스터 노드가 4 개를 보여 주는 다이어그램입니다.](media/understand-quorum/dynamic-quorum-step-through.png)

위 시나리오는 없습니다. 저장소 공간 다이렉트를 사용 하는 일반 클러스터에 적용 됩니다. 그러나 저장소 공간 다이렉트를 사용 하는 경우 클러스터 두 개의 노드 오류를만 지원할 수 있습니다. 이 방법은 더 합니다 [쿼럼 섹션 풀](#poolQuorum)합니다.

### <a name="examples"></a>예

#### <a name="two-nodes-without-a-witness"></a>미러링 모니터 서버 없이 두 노드. 
한 노드의 투표가 0 이므로 *대부분* 총 투표 결정 됩니다 <strong>1 투표</strong>. 비 투표 노드 예기치 않게 작동이 중단 되더라도 survivor 1 월 1 개이고 클러스터도 계속 유지 됩니다. 투표 노드가 예기치 않게 작동이 survivor 0/1 개이고 클러스터 다운 합니다. 투표 노드 정상적으로 전원이 꺼져 응답이 다른 노드로 전송 됩니다 하 고 클러스터에도 계속 유지 됩니다. *<strong>이 때문에 미러링 모니터 서버를 구성 하는 것이 반드시 합니다.</strong>*

![미러링 모니터 서버 없이 두 개의 노드가 있는 경우에 설명 된 쿼럼](media/understand-quorum/2-node-no-witness.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>50% 기회</strong>합니다.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>아니요</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>아니요</strong>. 

#### <a name="two-nodes-with-a-witness"></a>미러링 모니터 서버를 사용 하 여 두 개의 노드가 있습니다. 
두 노드 투표 및 미러링 모니터 서버 응답 이므로 *과반수* 총 결정 됩니다 <strong>3 투표</strong>합니다. 두 노드 중 하나가 다운 되 면 survivor 2/3 개이고 클러스터도 계속 유지 됩니다.

![쿼럼 감시를 사용 하 여 두 개의 노드가 있는 경우 설명합니다.](media/understand-quorum/2-node-witness.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>아니요</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>아니요</strong>. 

#### <a name="three-nodes-without-a-witness"></a>미러링 모니터 서버 없이 3 개의 노드가 있습니다.
모든 노드의 투표 때문 *대부분* 총 결정 됩니다 <strong>3 투표</strong>합니다. 모든 노드에 다운 되 면 남은 개체 2/3 되며 클러스터도 계속 유지 됩니다. 클러스터에는 미러링 모니터 서버 없이 두 노드가 되 – 시나리오 1에는 해당 시점입니다.

![미러링 모니터 서버 없이 3 개의 노드가 있는 경우에 설명 된 쿼럼](media/understand-quorum/3-node-no-witness.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>50% 기회</strong>합니다.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>아니요</strong>. 

#### <a name="three-nodes-with-a-witness"></a>미러링 모니터 서버를 사용 하 여 3 개의 노드가 있습니다.
미러링 모니터 서버가 처음 투표 하지 되므로 모든 노드의 투표 합니다. 합니다 *과반수* 총 결정 됩니다 <strong>3 투표</strong>합니다. 실패 한 후 클러스터에 시나리오 2가 있는 미러링 모니터-를 사용 하 여 두 노드가 있습니다. 따라서 이제 두 개의 노드 및 미러링 모니터 서버 응답합니다.

![쿼럼 감시를 사용 하 여 3 개의 노드가 있는 경우 설명합니다.](media/understand-quorum/3-node-witness.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>예</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>아니요</strong>. 

#### <a name="four-nodes-without-a-witness"></a>미러링 모니터 서버 없이 4 개의 노드
한 노드의 투표가 0 이므로 *대부분* 총 결정 됩니다 <strong>3 투표</strong>. 실패 한 후 클러스터 세 개의 노드를 되며 시나리오 3에 있는 합니다.

![미러링 모니터 서버 없이 4 개의 노드가 있는 경우에 설명 된 쿼럼](media/understand-quorum/4-node-no-witness.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>예</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>50% 기회</strong>합니다. 

#### <a name="four-nodes-with-a-witness"></a>미러링 모니터 서버를 사용 하 여 4 개의 노드가 있습니다.
모든 노드 응답 및 미러링 모니터 서버 응답 하므로 *과반수* 총 결정 됩니다 <strong>5 투표</strong>합니다. 하나의 실패 후 관심이 시나리오 4입니다. 두 개의 동시 오류 후 시나리오 2까지 건너뜁니다.

![쿼럼 감시를 사용 하 여 4 개의 노드가 있는 경우 설명합니다.](media/understand-quorum/4-node-witness.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>예</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>예</strong>. 

#### <a name="five-nodes-and-beyond"></a>5 개 노드 이상.
모든 노드의 투표 하거나 하나를 제외한 모든 투표 무엇이 든 홀수 합계. 저장소 공간 다이렉트 처리할 수 없습니다 두 개 이상의 노드 다운, 이므로이 시점에서 미러링 모니터 서버가 필요 하거나 유용한.

![쿼럼 이상 5 개의 노드가 있는 경우 설명](media/understand-quorum/5-nodes.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>예</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>예</strong>. 

쿼럼 작동 원리를 이해 했으므로 쿼럼 미러링 모니터 서버 유형의에서 살펴보겠습니다.

### <a name="quorum-witness-types"></a>쿼럼 감시 유형

장애 조치 클러스터링 쿼럼 미러링 모니터의 세 가지 유형을 지원합니다.

- <strong>[클라우드 감시](../../failover-clustering\deploy-cloud-witness.md)</strong>  -클러스터의 모든 노드에서 액세스할 수 있는 Azure의 저장소 Blob입니다. Witness.log 파일에서 클러스터링 정보를 유지 하지만, 클러스터 데이터베이스의 복사본을 저장 하지 않습니다.
- <strong>파일 공유 감시</strong> – Windows Server를 실행 하는 파일 서버에 구성 되어 있는 SMB 파일 공유 합니다. Witness.log 파일에서 클러스터링 정보를 유지 하지만, 클러스터 데이터베이스의 복사본을 저장 하지 않습니다.
- <strong>디스크 감시</strong> -사용 가능한 저장소 클러스터 그룹에 있는 작은 클러스터 된 디스크. 이 디스크는 항상 사용 가능 하며 노드 간에 장애 조치할 수 있습니다. 클러스터 데이터베이스의 복사본을 포함 합니다.  <strong>*디스크 감시를 저장소 공간 다이렉트를 사용 하 여 지원 되지 않습니다*</strong>합니다.

## <a id="poolQuorum"></a>풀 쿼럼 개요

방금 클러스터 수준에서 작동 하는 클러스터 쿼럼에 대 한 설명 했습니다. 이제 풀 쿼럼을 (즉, 노드를 손실 될 수 있습니다 및 드라이브 하 얻는 풀이)은 풀 수준에서 작동 하는 세부 사항을 살펴보도록 하겠습니다. 저장소 풀 이기 때문에 여러 다른 쿼럼 메커니즘을 갖게 클러스터형 및 비클러스터형 시나리오에서 사용할 설계 되었습니다.

아래 표에서 시나리오에 따라 풀 쿼럼을 결과 대 한 개요를 제공합니다.

| 서버 노드 | 하나의 서버 노드 오류에서 존속 수 있습니다. | 하나의 서버 노드 실패 후 다른 감당할 수 있습니다. | 두 개의 동시 서버 노드 장애를 견딜 수 있습니다. |
|--------------|-------------------------------------|---------------------------------------------------|----------------------------------------------------|
| 2            | 아니요                                  | 아니요                                                | 아니요                                                 |
| 2 + 미러링 모니터 서버  | 예                                 | 아니오                                                | 아니오                                                 |
| 3            | 예                                 | 아니오                                                | 아니오                                                 |
| 3 + 미러링 모니터 서버  | 예                                 | 아니오                                                | 아니요                                                 |
| 4            | 예                                 | 아니오                                                | 아니요                                                 |
| 4 + 미러링 모니터 서버  | 예                                 | 예                                               | 예                                                |
| 5 이상  | 예                                 | 예                                               | 예                                                |

## <a name="how-pool-quorum-works"></a>풀 쿼럼을 작동 원리

존속 드라이브 구성는 확인 해야 드라이브에 장애가 발생 하거나 드라이브의 일부 하위 집합의 다른 하위 집합을 사용 하 여 연결이 끊어져 경우 합니다 *대부분* 온라인 상태로 유지 하려면 풀의 합니다. 이러한를 확인할 수 없는 하는 경우 오프 라인 상태가 됩니다. 풀은 오프 라인 또는 온라인 상태로 유지 됩니다 충분 한 디스크 쿼럼에 대 한 것에 있는지에 따라 해당 하는 엔터티 (50% + 1). 풀 리소스 소유자 (활성 클러스터 노드) + 1을 수 있습니다.

하지만 풀 쿼럼을 다음과 같은 방법으로 클러스터 쿼럼에서 다르게 작동 합니다.

- 풀에서는 하나의 노드 클러스터 결정 기준으로 미러링 모니터 서버 드라이브 완료 (풀 리소스 소유자가이 노드)의 절반를 견딜 수
- 풀에는 동적 쿼럼이 없는 합니다.
- 풀 투표를 제거 하는 자체 버전을 구현 하지 않습니다.

### <a name="examples"></a>예

#### <a name="four-nodes-with-a-symmetrical-layout"></a>대칭 레이아웃을 사용한 4 노드 배포 합니다. 
각 16 드라이브에 응답을 하나씩 있고 노드 2도 응답이 (이므로 풀 리소스 소유자). 합니다 *과반수* 총 결정 됩니다 <strong>16 투표</strong>합니다. 노드 3 및 4의 작동이 하는 경우 드라이브 8 및 9 월 16 투표는 풀 리소스 소유자, 남아 있는 하위 집합에 있습니다. 따라서 풀도 같은 작업을 계속 유지 됩니다.

![풀 쿼럼을 1](media/understand-quorum/pool-1.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>예</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>예</strong>. 

#### <a name="four-nodes-with-a-symmetrical-layout-and-drive-failure"></a>대칭 레이아웃 및 드라이브 오류와 함께 4 개의 노드가 있습니다. 
각 16 드라이브에 응답을 하나씩 있고 노드 2도 응답이 (이므로 풀 리소스 소유자). 합니다 *과반수* 총 결정 됩니다 <strong>16 투표</strong>합니다. 첫째, 드라이브 7 이동합니다. 노드 3 및 4의 작동이 경우 존속 하위 집합에 7 드라이브 및 8 월 16 투표는 풀 리소스 소유자가 있습니다. 따라서 풀 대부분 없고 중단 합니다.

![풀 쿼럼을 2](media/understand-quorum/pool-2.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>아니요</strong>.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>아니요</strong>. 

#### <a name="four-nodes-with-a-non-symmetrical-layout"></a>대칭 레이아웃을 사용한 4 노드 배포 합니다. 
각 24 드라이브에 응답을 하나씩 있고 노드 2도 응답이 (이므로 풀 리소스 소유자). 합니다 *과반수* 총 결정 됩니다 <strong>24 투표</strong>합니다. 노드 3 및 4의 작동이 하는 경우 드라이브 8 및 9/24 투표는 풀 리소스 소유자, 남아 있는 하위 집합에 있습니다. 따라서 풀 대부분 없고 중단 합니다.

![풀 쿼럼을 3](media/understand-quorum/pool-3.png)

- 한 서버 오류를 감당할 수 있습니다. <strong>예</strong>.
- 한 서버 오류 후 다른 감당할 수 있습니다. <strong>종속</strong> (모두 노드 3 및 4 중단 하지만 다른 모든 시나리오를 감당할 수 있습니다 하는 경우 감당할 수 없습니다.
- 한 번에 두 개의 서버 오류를 감당할 수 있습니다. <strong>종속</strong> (모두 노드 3 및 4 중단 하지만 다른 모든 시나리오를 감당할 수 있습니다 하는 경우 감당할 수 없습니다.

### <a name="pool-quorum-recommendations"></a>풀 쿼럼 권장 사항

- 클러스터의 노드마다 대칭 인지 확인 (각 노드는 동일한 드라이브 수 있음)
- 노드 실패를 허용할 하 고 가상 디스크를 온라인 유지할 수 있도록 3 방향 미러 또는 이중 패리티를 사용 하도록 설정 합니다. 참조 우리의 [볼륨 참고 자료 페이지](plan-volumes.md) 대 한 자세한 내용은 합니다.
- 두 개의 노드가 다운 되는 것 보다 더 많은 또는 두 개의 노드 및 디스크를 다른 노드에 다운 경우 볼륨 데이터를 세 복사본이 모두에 액세스할 수 없는 따라서 오프 라인 및 사용할 수 없습니다. 서버를 다시 가져오기 또는 디스크 볼륨의 모든 데이터에 대 한 대부분의 복원 력을 보장를 신속 하 게 대체 하이 좋습니다.

## <a name="more-information"></a>자세한 정보

- [쿼럼 구성 및 관리](../../failover-clustering/manage-cluster-quorum.md)
- [클라우드 감시 배포](../../failover-clustering/deploy-cloud-witness.md)
